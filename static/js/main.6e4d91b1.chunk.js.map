{"version":3,"sources":["stores/AppReducer.js","stores/AppStore.js","db/AppDatabase.js","utils/AppLogicUtils.js","controllers/AppLogicController.js","components/drawers/NewStory.js","controllers/AppValidationsController.js","controllers/ImportExportStoryController.js","images/logo192.png","components/AppNav.js","components/StoryTitle.js","images/jake-reading.png","components/pages/EmptyProjectPage.js","components/drawers/AddCustomEntity.js","components/drawers/EditColors.js","components/entity_views/GameStateListItem.js","components/drawers/AddEditGameStateProp.js","components/sections/GameStateConfigSection.js","components/entity_views/LocationView.js","components/drawers/AddEditLocation.js","components/drawers/AddEditArea.js","components/sections/LocationConfigSection.js","components/entity_views/SimpleEntityView.js","components/drawers/AddEditCharacter.js","components/sections/CharacterConfigSection.js","components/drawers/AddEditCustomEntity.js","components/sections/CustomEntityConfigSection.js","components/pages/ConfigPage.js","components/entity_views/ActView.js","components/entity_views/ChapterView.js","components/drawers/AddEditChapter.js","components/drawers/AddEditAct.js","components/sections/StorylineSection.js","utils/EditorUtils.js","controllers/AppDataFetchController.js","components/entity_views/EntitySelectorView.js","utils/ConditionEditorUtils.js","components/entity_views/ComplexConditionExpressionListItem.js","components/drawers/ConditionEditor.js","components/pages/StoryPage.js","components/PlayActions.js","components/sections/PlaytestConfigurationSection.js","components/sections/StoryValidationSection.js","components/pages/PlayModePage.js","AppLayout.js","App.js","reportWebVitals.js","index.js"],"names":["AppReducer","state","action","type","initialCheckDone","databaseLoadError","globalLoading","storyLoadError","storyErrorMessage","payload","page","storyLoaded","storyRunnable","storyVerifyingRunnable","initialState","AppContext","createContext","AppStore","children","useReducer","dispatch","Provider","value","db","Dexie","version","stores","stories","game_state_props","locations","areas","characters","custom_entity_defs","custom_entities","default_entity_colors","chapters","acts","AppLogicUtils","name","default","edit_mode","removable","description","color","getEntitiesDefaultColors","Math","floor","random","AppLogicController","open","catch","err","console","error","stack","where","equals","first","undefined","data","transaction","a","add","title","bulkAdd","getNewStoryDefaultGameStateProps","getNewStoryDefaultCharacters","getNewStoryDefaultEntityColors","then","result","log","Promise","reject","defaultValue","editMode","key","update","id","delete","location_id","singular","getCustomEntityRandomColor","custom_entity_def_id","order","affectedChapter","oldOrder","newBaseOrder","affectedChapters","orderBy","each","chapter","push","length","forEach","affected","chapter_id","affectedAct","affectedActs","toArray","orderedActs","sort","b","act","window","location","reload","NewStory","isDrawerVisible","onDrawerClose","useContext","Form","useForm","form","useState","visible","setVisible","setTitle","setVersion","useEffect","resetFields","openDrawer","closeDrawer","width","onClose","bodyStyle","paddingBottom","footer","style","textAlign","onClick","marginRight","htmlType","layout","onFinish","values","trim","message","createNewStory","success","requiredMark","gutter","span","Item","label","rules","required","placeholder","onChange","e","target","AppValidationsController","setTimeout","testNames","dbTable","invalidNames","resolve","entityDefId","ImportExportStoryController","progressCallback","errorCallback","story","d","Date","date","getFullYear","toString","getMonth","getDate","getHours","getMinutes","getSeconds","fileName","replaceAll","exportDB","prettyJson","blob","download","file","successCallback","isOpen","importInto","acceptMissingTables","acceptVersionDiff","acceptNameDiff","acceptChangedPrimaryKey","url","r","fetch","response","status","Sider","Layout","AppNav","collapsed","setCollapsed","shouldRenderMenu","setShouldRenderMenu","newStoryVisible","setNewStoryVisible","document","getElementById","addEventListener","readStoryFile","loadStory","click","clearStoryTest","devStartOver","files","loadStoryFromFile","importStoryProgressCallback","importStorySuccessCallback","totalRows","completedRows","toggleNav","handleClick","verifyStoryRunnable","loadSample","sampleUrl","loadStoryFromUrl","importSampleProgressCallback","importSampleSuccessCallback","className","collapsible","onCollapse","src","logo","alt","theme","mode","defaultSelectedKeys","disabled","icon","SettingFilled","BookFilled","CaretRightOutlined","marginLeft","marginTop","block","PlusOutlined","marginBottom","onConfirm","onCancel","okText","cancelText","placement","UploadOutlined","accept","display","DownloadOutlined","downloadStory","DeleteFilled","content","trigger","RocketOutlined","renderLoadSamples","BugOutlined","Header","Title","Typography","Text","StoryTitle","useLiveQuery","level","Content","EmptyProjectPage","jake_reading","AddCustomEntity","createNewCustomEntityDef","toLowerCase","replace","setFieldsValue","readOnly","EditColors","newDefaultColors","setNewDefaultColors","newCustomColors","setNewCustomColors","saveSucceed","setSaveSucceed","customEntityDefs","defaultEntityColors","Object","keys","updateDefaultEntityColor","parseInt","updateCustomEntityDefColor","dataSource","renderItem","item","textTransform","animation","enableAlpha","colors","newColors","setDefaultEntityColor","margin","setCustomEntityColor","GameStateListItem","gameState","onEditGameStateProp","onRemoveGameStateProp","endsWith","size","TextArea","Input","Option","Select","AddEditGameStateProp","gameStateProp","setName","setType","defaultValueInt","setDefaultValueInt","defaultValueBool","setDefaultValueBool","defaultValueString","setDefaultValueString","defaultValueArray","setDefaultValueArray","valuesArray","split","join","unquotedEntries","entry","slice","populateDefault","displaySingleLineDefaultField","arrayFieldLabelAndPlaceholder","singular_name","valudateArrayTypes","defaultValues","saveGameStateProp","integerValue","Number","isInteger","booleanValue","validateEntityNames","invalidLocations","invalidAreas","invalidCharacters","customEntityDef","find","validateCustomEntityNames","invalidEntities","getDefaultValue","newData","createNewGameStateProp","editData","updateGameStateProp","quotesWrappedEntries","isDefaultDisabled","indexOf","defaultLocation","defaultArea","defaultCharacter","defaultEntity","isNameDisabled","isTypeDisabled","map","checkedChildren","unCheckedChildren","checked","defaultChecked","rows","GameStateConfigSection","addEditGameStatePropVisible","setAddEditGameStatePropVisible","currentGameStateProp","setCurrentGameStateProp","gameStates","header","strong","maxWidth","deleteGameStateProp","LocationView","canEdit","canRemove","onRemove","onEdit","onAddArea","onEditArea","onRemoveArea","options","extra","headStyle","background","area","AddEditLocation","setDescription","createNewLocation","updateLocation","AddEditArea","createNewArea","updateArea","LocationConfigSection","addEditLocationVisible","setAddEditLocationVisible","addEditAreaVisible","setAddEditAreaVisible","currentLocation","setCurrentLocation","currentArea","setCurrentArea","deleteLocation","removeLocation","editLocation","addArea","editArea","deleteArea","removeArea","SimpleEntityView","entity","entityName","AddEditCharacter","character","createNewCharacter","updateCharacter","CharacterConfigSection","addEditCharacterVisible","setAddEditCharacterVisible","currentCharacter","setCurrentCharacter","deleteCharacter","removeCharacter","editCharacter","AddEditCustomEntity","entityDef","singularCapitalized","charAt","toUpperCase","createNewCustomEntity","updateCustomEntity","CustomEntityConfigSection","addEditCustomEntityVisible","setAddEditCustomEntityVisible","currentCustomEntity","setCurrentCustomEntity","entities","deleteCustomEntityDef","danger","deleteCustomEntity","removeEntity","editEntity","TabPane","Tabs","ConfigPage","addCustomEntityVisible","setAddCustomEntityVisible","editColorsVisible","setEditColorsVisible","addCustomEntityButton","PlusSquareOutlined","buttons","BgColorsOutlined","tabBarExtraContent","tab","index","ActView","actIndex","totalActs","onMoveOrderUp","onMoveOrderDown","CaretUpOutlined","CaretDownOutlined","Panel","Collapse","ChapterView","chapterIndex","totalChapters","onAddAct","onEditAct","onRemoveAct","actsCollapseHeader","defaultActiveKey","ghost","orderInfo","updateActOrder","moveActUp","moveActDown","AddEditChapter","setChapterIndex","createNewChapter","updateChapter","AddEditAct","setActIndex","actType","setActType","createNewAct","updateAct","initialValue","Group","buttonStyle","Button","StorylineSection","onAddCondition","addEditChapterVisible","setAddEditChapterVisible","addEditActVisible","setAddEditActVisible","currentChapter","setCurrentChapter","currentAct","setCurrentAct","currentChapterTotalActs","setCurrentChapterTotalActs","deleteChapter","removeChapter","editCharpter","updateChapterOrder","moveCharpterUp","moveCharpterDown","addAct","editAct","deleteAct","removeAct","EditorUtils","propType","comparatorId","emptyExpression","gsProp","gsPropType","comp","compId","valueInputType","AppDataFetchController","tableName","EntitySelectorView","entityType","onChangeCallback","setEntities","fetchStoryEntities","fetchedEntities","ConditionEditorUtils","selectValue","getComparatorsForPropType","comparator","fieldValue","substring","ComplexConditionExpressionListItem","expression","renderGameStatePropsSelector","exp","prop","renderComparatorSelector","getInputTypeForExpression","renderValueSelector","conditionCaret","CaretLeftOutlined","ConditionEditor","condition","conditionType","setConditionType","getEmptyExpression","singleExpression","setSingleExpression","complexCondition","setComplexCondition","complexConditionExpressions","setComplexConditionExpressions","setGameStates","fetchGameStateProps","fetchedGameStateProps","handleComplexCondExpressionChange","expressions","findIndex","complexConditionButtonClicked","newCondition","newExp","newComplexConditionExpressions","removed","pop","complexConditionExpressionsHeader","height","tabPosition","activeKey","singleCondComparator","complexConditionRender","element","displayName","renderComplexCondition","StoryPage","conditionEditorVisible","setConditionEditorVisible","PlayActions","shouldRenderPlayMessage","setShouldRenderPlayMessage","LoadingOutlined","renderPlayMessage","Paragraph","PlaytestConfigurationSection","groupPlayerInventory","setGroupPlayerInventory","showAchievements","setShowAchievements","flex","StoryValidationSection","PlayModePage","shouldRenderTabTitle","setShouldRenderTabTitle","statusIcon","CheckCircleOutlined","CloseCircleOutlined","renderValidationTabTitle","AppLayout","checkDatabaseOk","checkStoryLoaded","paddingTop","currentPage","React","createElement","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.6e4d91b1.chunk.js","sourcesContent":["const AppReducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_APP_INITIAL_CHECK_DONE':\n      return {\n        ...state,\n        initialCheckDone: true,\n        };\n    case 'SET_APP_DATABASE_LOAD_ERROR':\n      return {\n        ...state,\n        databaseLoadError: true,\n        initialCheckDone: true,\n      };\n    case 'SET_APP_STORY_LOAD_ERROR':\n      return {\n        ...state,\n        globalLoading: false,\n        storyLoadError: true,\n        storyErrorMessage: action.payload || null,\n      };\n    case 'SET_APP_PAGE':\n      return {\n        ...state,\n        page: action.payload,\n      };\n    case 'SET_APP_GLOBAL_LOADING':\n      return {\n        ...state,\n        globalLoading: action.payload || false,\n      };\n    case 'SET_STORY_LOADED':\n      return {\n        ...state,\n        globalLoading: false,\n        storyLoaded: action.payload,\n        storyRunnable: false,\n        page: (action.payload ? 'CONFIG' : 'EMPTY'),\n      };\n    case 'SET_STORY_VERIFYING_RUNNABLE':\n      return {\n        ...state,\n        storyVerifyingRunnable: true,\n        storyRunnable: false,\n      };\n    case 'SET_STORY_NOT_RUNNABLE':\n      return {\n        ...state,\n        storyVerifyingRunnable: false,\n        storyRunnable: false,\n      };\n    case 'SET_STORY_RUNNABLE':\n      return {\n        ...state,\n        storyVerifyingRunnable: false,\n        storyRunnable: true,\n      };\n\n    // case 'ADD_POST':\n    //     return {\n    //         ...state,\n    //         posts: state.posts.concat(action.payload)\n    //     };\n    // case 'REMOVE_POST':\n    //     return {\n    //         ...state,\n    //         posts: state.posts.filter(post => post.id !== action.payload)\n    //     };\n    // case 'SET_ERROR':\n    //     return {\n    //         ...state,\n    //         error: action.payload\n    //     };\n    default:\n        return state;\n  }\n};\n\nexport default AppReducer;\n","import React, {createContext, useReducer} from \"react\";\nimport AppReducer from './AppReducer'\n\nconst initialState = {\n  initialCheckDone: false,\n  globalLoading: false,\n  databaseLoadError: false,\n  storyLoadError: false,\n  storyErrorMessage: null,\n  storyLoaded: false,\n  storyVerifyingRunnable: false,\n  storyRunnable: false,\n  page: 'EMPTY',\n};\n\nconst AppStore = ({children}) => {\n    const [state, dispatch] = useReducer(AppReducer, initialState);\n    return (\n        <AppContext.Provider value={[state, dispatch]}>\n            {children}\n        </AppContext.Provider>\n    )\n};\n\nexport const AppContext = createContext(initialState);\nexport default AppStore;","import Dexie from 'dexie';\n\n\nconst db = new Dexie('RpgspDatabase');\n\ndb.version(1).stores({\n    stories: '++id',                                //title, version\n    game_state_props: '++id, name',                 //type, default, edit_mode, removable\n    locations: '++id, name',                        //description\n    areas: '++id, location_id, name',               //description\n    characters: '++id, name',                       //description\n    custom_entity_defs: '++id, singular_name',      //name, key, color\n    custom_entities: '++id, custom_entity_def_id, name',  //description\n    default_entity_colors: '++id',                  //name, color\n    //\n    chapters: '++id, order',                        //name, description\n    acts: '++id, order, chapter_id, type',          //name, description\n});\n\n//default_entity_colors for: locations, areas, characters\n\n//game_state_props.edit_mode = (string) \"none|all|name|type|default\"\n\n//act.type = (string) \"sequence|interactive\"\n\n\nexport const testDatabase = () => {\n  return db.open();\n};\n\nexport default db;\n","\nclass AppLogicUtils {\n  static getNewStoryDefaultGameStateProps() {\n    return [\n      {name: 'currentChapter', type: 'int', default: 0, edit_mode: 'none', removable: false},\n      {name: 'currentAct', type: 'int', default: 0, edit_mode: 'none', removable: false},\n      {name: 'currentActSequence', type: 'int', default: 0, edit_mode: 'none', removable: false},\n      {name: 'currentLocation', type: 'location', default: null, edit_mode: 'default', removable: false},\n      {name: 'currentArea', type: 'area', default: null, edit_mode: 'default', removable: false},\n    ];\n  }\n\n  static getNewStoryDefaultCharacters() {\n    return [\n      {name: '[Playable character]', description: '[Add description]'},\n    ];\n  }\n\n  static getNewStoryDefaultEntityColors() {\n    return [\n      {name: 'locations', color: AppLogicUtils.getEntitiesDefaultColors('locations')},\n      {name: 'areas', color: AppLogicUtils.getEntitiesDefaultColors('areas')},\n      {name: 'characters', color: AppLogicUtils.getEntitiesDefaultColors('characters')},\n    ];\n  }\n\n  static getEntitiesDefaultColors(name = 'locations') {\n    switch(name) {\n      case 'characters':\n        return '#1890ff';\n      case 'areas':\n        return '#a0d911';\n      case 'locations':\n      default:\n        return '#3f6600';\n    }\n  }\n\n  static getCustomEntityRandomColor() {\n    const defaultColorList = ['#ffa940', '#73d13d', '#10239e', '#36cfc9', '#9e1068', '#9254de', '#85a5ff', '#fadb14', '#ffa940', '#391085'];\n    return defaultColorList[Math.floor(Math.random() * 10)];\n  }\n\n}\n\nexport default AppLogicUtils;","import db, { testDatabase } from '../db/AppDatabase';\nimport AppLogicUtils from '../utils/AppLogicUtils';\n\n//Controls modifications in app state and database\nclass AppLogicController {\n\n  static checkDatabaseOk(dispatch) {\n    testDatabase().catch((err) => {\n      console.error('Failed to open db: ' + (err.stack || err));\n      dispatch({type: 'SET_APP_DATABASE_LOAD_ERROR'});\n    });\n  }\n\n  static async checkStoryLoaded(dispatch) {\n    const story = await db.stories.where('id').equals(1).first();\n    if (story !== undefined) {\n      dispatch({type: 'SET_STORY_LOADED', payload: true});\n    }\n    dispatch({type: 'SET_APP_INITIAL_CHECK_DONE'});\n  }\n\n  //-- Story --//\n  static createNewStory(dispatch, data) {\n    return db.transaction('rw', db.stories, db.game_state_props, db.characters, db.default_entity_colors, async () => {\n      await db.stories.add({'title': data.title, 'version': data.version});\n      await db.game_state_props.bulkAdd( AppLogicUtils.getNewStoryDefaultGameStateProps() );\n      await db.characters.bulkAdd( AppLogicUtils.getNewStoryDefaultCharacters() );\n      await db.default_entity_colors.bulkAdd( AppLogicUtils.getNewStoryDefaultEntityColors() );\n    }).then(result => {\n      dispatch({type: 'SET_STORY_LOADED', payload: true});\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n    // db.stories.add({'title': data.title, 'version': data.version}).then(() => {\n    //   dispatch({type: 'SET_STORY_LOADED', payload: true});\n    // });\n  }\n\n  //-- GameStateProps --//\n  static createNewGameStateProp(dispatch, data) {\n    return db.game_state_props.add({'name': data.name, 'type': data.type, 'default': data.defaultValue, 'edit_mode': data.editMode, 'removable': data.removable}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static updateGameStateProp(dispatch, key, data) {\n    return db.game_state_props.update(key, {'name': data.name, 'type': data.type, 'default': data.defaultValue, 'edit_mode': data.editMode, 'removable': data.removable}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static deleteGameStateProp(dispatch, id) {\n    return db.game_state_props.delete(id).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  //-- Location & Areas --//\n  static createNewLocation(dispatch, data) {\n    return db.locations.add({'name': data.name, 'description': data.description}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static updateLocation(dispatch, key, data) {\n    return db.locations.update(key, {'name': data.name, 'description': data.description}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static deleteLocation(dispatch, id) {\n    return db.transaction('rw', db.locations, db.areas, async () => {\n      await db.areas.where('location_id').equals(id).delete();\n      await db.locations.delete(id);\n    }).then(result => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static createNewArea(dispatch, data) {\n    return db.areas.add({'location_id': data.location_id, 'name': data.name, 'description': data.description}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static updateArea(dispatch, key, data) {\n    return db.areas.update(key, {'name': data.name, 'description': data.description}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static deleteArea(dispatch, id) {\n    return db.areas.delete(id).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  //-- Character --//\n  static createNewCharacter(dispatch, data) {\n    return db.characters.add({'name': data.name, 'description': data.description}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static updateCharacter(dispatch, key, data) {\n    return db.characters.update(key, {'name': data.name, 'description': data.description}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static deleteCharacter(dispatch, id) {\n    return db.characters.delete(id).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  //-- Custom Entities --//\n  static createNewCustomEntityDef(dispatch, data) {\n    return db.custom_entity_defs.add({'name': data.name, 'key': data.key, 'singular_name': data.singular, 'color': AppLogicUtils.getCustomEntityRandomColor()}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static deleteCustomEntityDef(dispatch, id) {\n    return db.transaction('rw', db.custom_entity_defs, db.custom_entities, async () => {\n      await db.custom_entities.where('custom_entity_def_id').equals(id).delete();\n      await db.custom_entity_defs.delete(id);\n    }).then(result => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static createNewCustomEntity(dispatch, data) {\n    return db.custom_entities.add({'custom_entity_def_id': data.custom_entity_def_id, 'name': data.name, 'description': data.description}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static updateCustomEntity(dispatch, key, data) {\n    return db.custom_entities.update(key, {'name': data.name, 'description': data.description}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static deleteCustomEntity(dispatch, id) {\n    return db.custom_entities.delete(id).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  //-- Colors --//\n  static updateDefaultEntityColor(dispatch, key, data) {\n    return db.default_entity_colors.update(key, {'color': data.color}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static updateCustomEntityDefColor(dispatch, key, data) {\n    return db.custom_entity_defs.update(key, {'color': data.color}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  //-- Chapters --//\n  static createNewChapter(dispatch, data) {\n    return db.chapters.add({'name': data.name, 'description': data.description, 'order': data.order}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static updateChapter(dispatch, key, data) {\n    //do not accept order update\n    return db.chapters.update(key, {'name': data.name, 'description': data.description}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static updateChapterOrder(dispatch, key, data) {\n    return db.transaction('rw', db.chapters, async () => {\n      const affectedChapter = await db.chapters.where('order').equals(data.order).first();\n      await db.chapters.update(key, {'order': data.order});\n      await db.chapters.update(affectedChapter.id, {'order': data.oldOrder});\n    }).then(result => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static deleteChapter(dispatch, id) {\n    return db.transaction('rw', db.chapters, async () => {\n      let newBaseOrder = null;\n      let affectedChapters = [];\n      const chapters = db.chapters.orderBy('order');\n      await chapters.each(chapter => {\n        if(newBaseOrder !== null){\n          affectedChapters.push({key: chapter.id, order: newBaseOrder + affectedChapters.length});\n        }\n        if(chapter.id === id){\n          newBaseOrder = chapter.order;\n        }\n      });\n      await db.chapters.delete(id);\n      affectedChapters.forEach(async (affected) => {\n        await db.chapters.update(affected.key, {'order': affected.order});\n      });\n\n      //TODO remove acts, remove sequenced actions associated to acts, remove end conditions associated to acts\n\n\n\n    }).then(result => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  //-- Acts --//\n  static createNewAct(dispatch, data) {\n    return db.acts.add({'chapter_id': data.chapter_id, 'name': data.name, 'description': data.description, 'order': data.order, 'type': data.type}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static updateAct(dispatch, key, data) {\n    //do not accept order update\n    return db.acts.update(key, {'name': data.name, 'description': data.description}).then(() => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static updateActOrder(dispatch, key, data) {\n    return db.transaction('rw', db.acts, async () => {\n      const affectedAct = await db.acts.where({chapter_id: data.chapter_id, order: data.order}).first();\n      await db.acts.update(key, {'order': data.order});\n      await db.acts.update(affectedAct.id, {'order': data.oldOrder});\n    }).then(result => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  static deleteAct(dispatch, id, chapter_id) {\n    return db.transaction('rw', db.acts, async () => {\n      let newBaseOrder = null;\n      let affectedActs = [];\n      const acts = await db.acts.where('chapter_id').equals(chapter_id).toArray();\n      const orderedActs = acts.sort((a, b) => { return a.order - b.order; });\n      await orderedActs.forEach(act => {\n        if(newBaseOrder !== null){\n          affectedActs.push({key: act.id, order: newBaseOrder + affectedActs.length});\n        }\n        if(act.id === id){\n          newBaseOrder = act.order;\n        }\n      });\n      await db.acts.delete(id);\n      affectedActs.forEach(async (affected) => {\n        await db.acts.update(affected.key, {'order': affected.order});\n      });\n\n      //TODO remove sequenced actions associated to act, remove end conditions associated to act\n\n\n    }).then(result => {\n      //\n    }).catch(error => {\n      console.log('||--FAIL', error);\n      //return reject to allow catch chain\n      return Promise.reject(error);\n    });\n  }\n\n  //-- Dev --//\n  static devStartOver(dispatch) {\n    return db.delete().then( () => window.location.reload() );\n  }\n}\n\nexport default AppLogicController;","import { useState, useEffect, useContext } from 'react';\nimport { Drawer, Form, Button, Col, Row, Input, message } from 'antd';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\n\nconst NewStory = ({ isDrawerVisible, onDrawerClose }) => {\n  const [,dispatch] = useContext(AppContext);\n  const [form] = Form.useForm();\n  const [visible, setVisible] = useState(false);\n  const [title, setTitle] = useState('');\n  const [version, setVersion] = useState('');\n\n  useEffect(() => {\n    if(isDrawerVisible) { //opening drawer\n      form.resetFields();\n      openDrawer();\n    }\n  }, [isDrawerVisible, form]);\n\n  const openDrawer = () => {\n    setVisible(true);\n  };\n\n  const closeDrawer = () => {\n    setVisible(false);\n    onDrawerClose && onDrawerClose();\n  };\n\n  const onFinish = (values) => {\n    const title = values.title.trim();\n    const version = values.version.trim();\n    if(title === '' || version === ''){\n      closeDrawer();\n      message.error('Something went wrong, sorry :(');\n      return;\n    }\n    const data = {title, version};\n    AppLogicController.createNewStory(dispatch, data).then(result => {\n      closeDrawer();\n      message.success('Story created!');\n    }).catch(error => {\n      closeDrawer();\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  return (\n    <Drawer\n      title=\"New story\"\n      width={360}\n      onClose={closeDrawer}\n      visible={visible}\n      bodyStyle={{ paddingBottom: 20 }}\n      footer={\n        <div style={{textAlign: 'right'}} >\n          <Button onClick={closeDrawer} style={{ marginRight: 8 }}>\n            Cancel\n          </Button>\n          <Button type=\"primary\" htmlType=\"submit\" form='create-story-id'>\n            Create\n          </Button>\n        </div>\n      }\n    >\n      <Form layout=\"vertical\" name='create-story' id='create-story-id' form={form} onFinish={onFinish} requiredMark={false}>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"title\"\n              label=\"Title\"\n              rules={[{ required: true, message: 'Please enter a title' }]}\n            >\n              <Input placeholder=\"Please enter a title\" value={title} onChange={(e) => { setTitle(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"version\"\n              label=\"Version\"\n              rules={[{ required: true, message: 'Please enter a version' }]}\n            >\n              <Input placeholder=\"Please enter a version\" value={version} onChange={(e) => { setVersion(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n      </Form>\n    </Drawer>\n  );\n};\n\nexport default NewStory;\n","import db from '../db/AppDatabase';\n\n//Controls app-level verifications\nclass AppValidationsController {\n\n  //-- verify story is runnable --//\n  static async verifyStoryRunnable(dispatch) {\n    dispatch({type: 'SET_STORY_VERIFYING_RUNNABLE'});\n\n    //TODO: Verify all data in story is set properly to execute playtesting\n\n    setTimeout(() => { dispatch({type: 'SET_STORY_RUNNABLE'}); }, 3000);\n\n  }\n\n  //-- validateEntityNames --//\n  static async validateEntityNames(testNames, dbTable) {\n    let invalidNames = [];\n    return db.transaction('r', dbTable, async () => {\n      for (const name of testNames) {\n        const entity = await dbTable.where({name: name}).first();\n        if(entity === undefined){\n          invalidNames.push(name);\n        }\n      }\n      if(invalidNames.length === 0) {\n        return Promise.resolve();\n      } else {\n        return Promise.reject(invalidNames);\n      }\n    });\n  }\n\n  static async validateCustomEntityNames(testNames, entityDefId) {\n    let invalidNames = [];\n    return db.transaction('r', db.custom_entities, async () => {\n      for (const name of testNames) {\n        const entity = await db.custom_entities.where({name: name, custom_entity_def_id: entityDefId}).first();\n        if(entity === undefined){\n          invalidNames.push(name);\n        }\n      }\n      if(invalidNames.length === 0) {\n        return Promise.resolve();\n      } else {\n        return Promise.reject(invalidNames);\n      }\n    });\n  }\n\n}\n\nexport default AppValidationsController;","import db from '../db/AppDatabase';\nimport { exportDB, importInto } from 'dexie-export-import';\nimport download from 'downloadjs';\n\n//Controls story import/export operations\nclass ImportExportStoryController {\n\n  static async downloadStory(dispatch, progressCallback = () => {}, errorCallback = () => {}) {\n    try {\n      const story = await db.stories.where('id').equals(1).first();\n      const d = new Date();\n      const date = d.getFullYear().toString() + d.getMonth().toString() + d.getDate().toString() + '-' + d.getHours().toString() + d.getMinutes().toString() + d.getSeconds().toString();\n      const fileName = story.title.replaceAll(' ', '_') + '-' + date + '.json';\n      const blob = await exportDB(db, {prettyJson: true, progressCallback});\n      download(blob, fileName, 'application/json');\n    } catch (error) {\n      errorCallback(error);\n    }\n  }\n\n  static async loadStoryFromFile(dispatch, file, progressCallback = () => {}, successCallback = () => {}) {\n    try {\n      if(db.isOpen()){\n        await db.delete().then( () => db.open() );\n      }\n      await importInto(db, file, {\n        acceptMissingTables: false,\n        acceptVersionDiff: false,\n        acceptNameDiff: false,\n        acceptChangedPrimaryKey: false,\n        progressCallback: progressCallback\n      });\n      const story = await db.stories.where('id').equals(1).first();\n      if (story !== undefined) {\n        dispatch({type: 'SET_STORY_LOADED', payload: true});\n      }\n      successCallback();\n    } catch (error) {\n      dispatch({type: 'SET_APP_STORY_LOAD_ERROR', payload: error});\n      console.log(error);\n    }\n  }\n\n  static async loadStoryFromUrl(dispatch, url, progressCallback = () => {}, successCallback = () => {}) {\n    dispatch({type: 'SET_APP_GLOBAL_LOADING', payload: true});\n    await new Promise(r => setTimeout(r, 800));\n    try {\n      fetch(url).then(async response => {\n        if (response.status !== 200) {\n          dispatch({type: 'SET_APP_STORY_LOAD_ERROR', payload: response.status});\n          return;\n        }\n        //clear db\n        if(db.isOpen()){\n          await db.delete().then( () => db.open() );\n        }\n        //load new story\n        response.blob().then(async blob => {\n          await importInto(db, blob, {\n            acceptMissingTables: false,\n            acceptVersionDiff: false,\n            acceptNameDiff: false,\n            acceptChangedPrimaryKey: false,\n            progressCallback: progressCallback\n          });\n          const story = await db.stories.where('id').equals(1).first();\n          if (story !== undefined) {\n            dispatch({type: 'SET_STORY_LOADED', payload: true});\n            successCallback();\n          }\n        });\n      })\n      .catch(error => {\n        dispatch({type: 'SET_APP_STORY_LOAD_ERROR', payload: error});\n        console.log(error);\n      });\n    } catch (error) {\n      dispatch({type: 'SET_APP_STORY_LOAD_ERROR', payload: error});\n      console.log(error);\n    }\n  }\n\n}\n\nexport default ImportExportStoryController;","export default \"data:image/png;base64,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\"","//-- Components --//\nimport { useState, useEffect, useContext } from 'react';\nimport { Layout, Menu, Col, Row, Button, Popconfirm, Popover, message } from 'antd';\nimport { SettingFilled, BookFilled, DownloadOutlined, UploadOutlined, DeleteFilled, PlusOutlined, BugOutlined, CaretRightOutlined, RocketOutlined } from '@ant-design/icons';\nimport NewStory from './drawers/NewStory';\n//-- Controller --//\nimport AppLogicController from '../controllers/AppLogicController';\nimport AppValidationsController from '../controllers/AppValidationsController';\nimport ImportExportStoryController from '../controllers/ImportExportStoryController';\n//-- Context --//\nimport { AppContext } from '../stores/AppStore';\n//-- Images --//\nimport logo from '../images/logo192.png';\n//-- Style --//\nimport '../styles/components/AppNav.scss';\n\nconst { Sider } = Layout;\n\nconst AppNav = () => {\n  const [state, dispatch] = useContext(AppContext);\n\n  const [collapsed, setCollapsed] = useState(false);\n  const [shouldRenderMenu, setShouldRenderMenu] = useState(true);\n  const [newStoryVisible, setNewStoryVisible] = useState(false);\n\n  useEffect(() => {\n    //Mount\n    document.getElementById('load-story-selector').addEventListener('change', readStoryFile, false);\n\n  }, []); // eslint-disable-line\n\n  useEffect(() => {\n    setShouldRenderMenu(false);\n    setTimeout(() => {\n      setShouldRenderMenu(true);\n    }, 5);\n  }, [state.storyLoaded]);\n\n\n  const loadStory = () => {\n    document.getElementById('load-story-selector').click();\n  };\n\n  const clearStoryTest = () => {\n    AppLogicController.devStartOver(dispatch);\n    //dispatch({type: 'SET_STORY_LOADED', payload: false});\n  };\n\n  const downloadStory = () => {\n    ImportExportStoryController.downloadStory(dispatch);\n  };\n\n  //dev\n  const devStartOver = () => {\n    AppLogicController.devStartOver(dispatch);\n  };\n\n\n  const readStoryFile = async (e) => {\n    var file = e.target.files[0];\n    if (!file) {\n      return;\n    }\n    ImportExportStoryController.loadStoryFromFile(dispatch, file, importStoryProgressCallback, importStorySuccessCallback);\n  };\n\n  const importStoryProgressCallback = ({totalRows, completedRows}) => {\n    //console.log(`Progress: ${completedRows} of ${totalRows} rows completed`);\n  };\n\n  const importStorySuccessCallback = () => {\n    message.success('Story imported successfully!');\n  };\n\n  const toggleNav = () => {\n    setCollapsed(!collapsed);\n  };\n\n  const handleClick = ({key}) => {\n    switch(key) {\n      case '1':\n        dispatch({type: 'SET_APP_PAGE', payload: 'CONFIG'});\n        break;\n      case '2':\n        dispatch({type: 'SET_APP_PAGE', payload: 'STORY'});\n        break;\n      case '3':\n        AppValidationsController.verifyStoryRunnable(dispatch);\n        setTimeout(() => { dispatch({type: 'SET_APP_PAGE', payload: 'PLAYMODE'}); }, 50);\n        break;\n      default:\n        break;\n    }\n  };\n\n  const loadSample = (sampleUrl) => {\n    ImportExportStoryController.loadStoryFromUrl(dispatch, sampleUrl, importSampleProgressCallback, importSampleSuccessCallback);\n  };\n\n  const importSampleProgressCallback = () => {\n    //\n  };\n\n  const importSampleSuccessCallback = () => {\n    message.success('Sample story imported successfully!');\n  };\n\n  const renderMenu = () => {\n    return (\n      <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={(state.storyLoaded ? ['1'] : [])} onClick={handleClick}>\n        <Menu.Item key=\"1\" disabled={!state.storyLoaded} icon={<SettingFilled />}>\n          Configuration\n        </Menu.Item>\n        <Menu.Item key=\"2\" disabled={!state.storyLoaded} icon={<BookFilled />}>\n          Story\n        </Menu.Item>\n        <Menu.Item key=\"3\" disabled={!state.storyLoaded} icon={<CaretRightOutlined />}>\n          Play\n        </Menu.Item>\n      </Menu>\n    );\n  };\n\n  const renderLoadStory = () => {\n    return (\n      <>\n        {state.storyLoaded\n          ? \n          <Popconfirm\n            title={() => { return (<p>Download current story to avoid losing your changes.<br/>Continue loading a new story?</p>); }}\n            onConfirm={loadStory}\n            onCancel={() => {}}\n            okText='Yes'\n            cancelText='No'\n            placement='right'\n          >\n            <Button type=\"default\" block icon={<UploadOutlined />} style={{ marginBottom: 12 }}>Load story</Button>\n          </Popconfirm>\n          : \n          <Button type=\"default\" block icon={<UploadOutlined />} style={{ marginBottom: 12 }} onClick={loadStory}>Load story</Button>\n        }\n        <input type='file' id='load-story-selector' accept='.json' style={{ display: 'none' }} />\n      </>\n    );\n  };\n\n  const renderClearStory = () => {\n    return (\n      <Popconfirm\n        title='All data will be lost. Are you sure to delete this story?'\n        onConfirm={clearStoryTest}\n        onCancel={() => {}}\n        okText='Yes'\n        cancelText='No'\n        placement='right'\n      >\n        <Button type='default' block icon={<DeleteFilled />} style={{ marginBottom: 12 }}>Clear story</Button>\n      </Popconfirm>\n    );\n  };\n\n  const renderLoadSamples = () => {\n    const content = (\n      <div>\n        <Button type='default' block style={{ marginBottom: 12 }} onClick={() => { loadSample('https://gcsebas99.github.io/rpgsp/samples/Sample1_en.json') }}>Sample #1 (english)</Button>\n        <Button type='default' block style={{ marginBottom: 12 }} onClick={() => { loadSample('https://gcsebas99.github.io/rpgsp/samples/Sample1_es.json') }}>Sample #1 (spanish)</Button>\n      </div>\n    );\n    return (\n      <Popover placement='right' title='Select a story' content={content} trigger='click'>\n        <Button type=\"default\" block icon={<RocketOutlined />} style={{ marginBottom: 12 }}>Load samples</Button>\n      </Popover>\n    );\n  };\n\n  return (\n    <>\n      <Sider className='app-nav' collapsible collapsed={collapsed} onCollapse={toggleNav}>\n        <div className={`logo ${collapsed ? 'collapsed' : ''}`}>\n          <img src={logo} alt=\"RPG Story Playtesting\" onClick={toggleNav} />\n        </div>\n        <div className='menu-wrapper'>\n          {shouldRenderMenu && renderMenu()}\n        </div>\n        {!collapsed &&\n          <Row gutter={16} style={{ marginLeft: 8, marginRight: 8, marginTop: 32 }}>\n            <Col span={24}>\n              {!state.storyLoaded &&\n                <Button type=\"default\" onClick={() => { setNewStoryVisible(true); }} block icon={<PlusOutlined />} style={{ marginBottom: 12 }} >New story</Button>\n              }\n              {renderLoadStory()}\n              {state.storyLoaded &&\n                <>\n                  <Button type=\"default\" block icon={<DownloadOutlined />} style={{ marginBottom: 12 }} onClick={downloadStory}>Download story</Button>\n                  {renderClearStory()}\n                </>\n              }\n              {renderLoadSamples()}\n              <Button type=\"default\" block icon={<BugOutlined />} style={{ marginBottom: 12 }} onClick={devStartOver}>dev:startover</Button>\n            </Col>\n          </Row>\n        }\n      </Sider>\n      <NewStory isDrawerVisible={newStoryVisible} onDrawerClose={() => { setNewStoryVisible(false); }} />\n    </>\n  );\n};\n\nexport default AppNav;\n","import { Layout, Typography } from 'antd';\nimport { useLiveQuery } from 'dexie-react-hooks';\nimport db from '../db/AppDatabase';\nimport '../styles/components/StoryTitle.scss';\n\nconst { Header } = Layout;\nconst { Title, Text } = Typography;\n\nconst StoryTitle = () => {\n  const story = useLiveQuery(() => db.stories.where('id').equals(1).first());\n\n  if (story === undefined) return null;\n\n  return (\n    <Header className='story-title'>\n      <Title level={4}>RPG-SP: {story.title}</Title>\n      <Text type='secondary'>Version: {story.version}</Text>\n    </Header>\n  );\n};\n\nexport default StoryTitle;\n","export default __webpack_public_path__ + \"static/media/jake-reading.fddcdec6.png\";","import { Layout, Typography } from 'antd';\nimport jake_reading from '../../images/jake-reading.png';\nimport '../../styles/components/pages/EmptyProjectPage.scss';\n\nconst { Content } = Layout;\nconst { Text } = Typography;\n\nconst EmptyProjectPage = () => {\n\n  return (\n    <Content className='empty-project-page'>\n      <img src={jake_reading} alt=\"Start a new story\" />\n      <Text>Create a new story or load an existing one</Text>\n    </Content>\n  );\n};\n\nexport default EmptyProjectPage;\n","import { useState, useEffect, useContext } from 'react';\nimport { Drawer, Form, Button, Col, Row, Input, message } from 'antd';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\n\nconst AddCustomEntity = ({ isDrawerVisible, onDrawerClose }) => {\n  const [,dispatch] = useContext(AppContext);\n  const [form] = Form.useForm();\n  const [visible, setVisible] = useState(false);\n\n  useEffect(() => {\n    if(isDrawerVisible) { //opening drawer\n      form.resetFields();\n      openDrawer();\n    }\n  }, [isDrawerVisible, form]);\n\n  const openDrawer = () => {\n    setVisible(true);\n  };\n\n  const closeDrawer = () => {\n    setVisible(false);\n    onDrawerClose && onDrawerClose();\n  };\n\n  const onNameChange = (e) => {\n    const key = e.target.value.toLowerCase().replace(/\\s/g, '');\n    form.setFieldsValue({key: key});\n  };\n\n  const onFinish = (values) => {\n    const name = values.name.trim();\n    const key = values.key.trim();\n    const singular = values.singular.trim();\n    if(name === '' || singular === ''){\n      closeDrawer();\n      message.error('Do not leave empty fields, sorry :(');\n      return;\n    }\n    const data = {name, key, singular};\n    AppLogicController.createNewCustomEntityDef(dispatch, data).then(result => {\n      closeDrawer();\n      message.success('New entity created!');\n    }).catch(error => {\n      closeDrawer();\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  return (\n    <Drawer\n      title=\"Add Custom Entity\"\n      width={360}\n      onClose={closeDrawer}\n      visible={visible}\n      bodyStyle={{ paddingBottom: 20 }}\n      footer={\n        <div style={{textAlign: 'right'}} >\n          <Button onClick={closeDrawer} style={{ marginRight: 8 }}>\n            Cancel\n          </Button>\n          <Button type=\"primary\" htmlType=\"submit\" form='create-custom-entity-id'>\n            Add\n          </Button>\n        </div>\n      }\n    >\n      <Form layout=\"vertical\" name='create-custom-entity' id='create-custom-entity-id' form={form} onFinish={onFinish} requiredMark={false}>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"name\"\n              label=\"Name (use plural)\"\n              rules={[{ required: true, message: 'Please enter a name' }]}\n            >\n              <Input placeholder=\"Please enter a name\" onChange={onNameChange} />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"key\"\n              label=\"Key\"\n            >\n              <Input readOnly placeholder=\"\" />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"singular\"\n              label=\"Singular\"\n              rules={[{ required: true, message: 'Please enter singular entity name' }]}\n            >\n              <Input placeholder=\"Please enter singular entity name\" />\n            </Form.Item>\n          </Col>\n        </Row>\n      </Form>\n    </Drawer>\n  );\n};\n\nexport default AddCustomEntity;\n","import { useState, useEffect, useContext } from 'react';\nimport { useLiveQuery } from 'dexie-react-hooks';\nimport db from '../../db/AppDatabase';\nimport { Drawer, Button, List, Row, Col, Divider, message } from 'antd';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\nimport ColorPicker from 'rc-color-picker';\nimport 'rc-color-picker/assets/index.css';\n\nconst EditColors = ({ isDrawerVisible, onDrawerClose }) => {\n  const [,dispatch] = useContext(AppContext);\n  const [visible, setVisible] = useState(false);\n  const [newDefaultColors, setNewDefaultColors] = useState({});\n  const [newCustomColors, setNewCustomColors] = useState({});\n  const [saveSucceed, setSaveSucceed] = useState(true);\n\n  const customEntityDefs = useLiveQuery(() => db.custom_entity_defs.toArray());\n  const defaultEntityColors = useLiveQuery(() => db.default_entity_colors.toArray());\n\n  useEffect(() => {\n    if(isDrawerVisible) { //opening drawer\n      openDrawer();\n    }\n  }, [isDrawerVisible]);\n\n  const openDrawer = () => {\n    setNewDefaultColors({});\n    setNewCustomColors({});\n    setVisible(true);\n  };\n\n  const closeDrawer = () => {\n    setVisible(false);\n    onDrawerClose && onDrawerClose();\n  };\n\n  const setDefaultEntityColor = (id, color) => {\n    let newColors = newDefaultColors;\n    newColors[id] = color;\n    setNewDefaultColors(newColors);\n  };\n\n  const setCustomEntityColor = (id, color) => {\n    let newColors = newCustomColors;\n    newColors[id] = color;\n    setNewCustomColors(newColors);\n  };\n\n  const updateNewColors = () => {\n    setSaveSucceed(true);\n    if(Object.keys(newDefaultColors).length === 0 && Object.keys(newCustomColors).length === 0 ) {\n      closeDrawer();\n      return;\n    }\n    for (const id in newDefaultColors) {\n      AppLogicController.updateDefaultEntityColor(dispatch, parseInt(id), {'color': newDefaultColors[id]}).then(result => {\n        //\n      }).catch(error => {\n        setSaveSucceed(false);\n      });\n    }\n    for (const id in newCustomColors) {\n      AppLogicController.updateCustomEntityDefColor(dispatch, parseInt(id), {'color': newCustomColors[id]}).then(result => {\n        //\n      }).catch(error => {\n        setSaveSucceed(false);\n      });\n    }\n    if(saveSucceed) {\n      closeDrawer();\n      message.success('Colors updated!');\n    } else {\n      closeDrawer();\n      message.error('Something went wrong, sorry :(');\n    }    \n  };\n\n  return (\n    <Drawer\n      title=\"Edit Colors\"\n      width={360}\n      onClose={closeDrawer}\n      visible={visible}\n      bodyStyle={{ paddingBottom: 20 }}\n      footer={\n        <div style={{textAlign: 'right'}} >\n          <Button onClick={closeDrawer} style={{ marginRight: 8 }}>\n            Cancel\n          </Button>\n          <Button type=\"primary\" onClick={updateNewColors}>\n            Update\n          </Button>\n        </div>\n      }\n    >\n      { (defaultEntityColors !== undefined && defaultEntityColors.length > 0) && \n        <List\n          dataSource={defaultEntityColors}\n          renderItem={item => (\n            <List.Item className='default-ent-color-list-item'>\n              <Row style={{width: '100%'}}>\n                <Col span={18} style={{textTransform: 'capitalize'}}>{item.name}</Col>\n                <Col span={6} style={{textAlign: 'right'}}>\n                  <ColorPicker\n                    animation='slide-up'\n                    placement='bottomRight'\n                    enableAlpha={false}\n                    color={item.color}\n                    onChange={(colors) => { setDefaultEntityColor(item.id, colors.color) }}\n                  />\n                </Col>\n              </Row>\n            </List.Item>\n          )}\n        />\n      }\n      { (customEntityDefs !== undefined && customEntityDefs.length > 0) && \n        <>\n          <Divider style={{margin: '0'}} />\n          <List\n            dataSource={customEntityDefs}\n            renderItem={item => (\n              <List.Item className='custom-ent-color-list-item'>\n                <Row style={{width: '100%'}}>\n                  <Col span={18}>{item.name}</Col>\n                  <Col span={6} style={{textAlign: 'right'}}>\n                    <ColorPicker\n                      animation='slide-up'\n                      placement='bottomRight'\n                      enableAlpha={false}\n                      color={item.color}\n                      onChange={(colors) => { setCustomEntityColor(item.id, colors.color) }}\n                    />\n                  </Col>\n                </Row>\n              </List.Item>\n            )}\n          />\n        </>\n      }\n    </Drawer>\n  );\n};\n\nexport default EditColors;\n","import { List, Row, Col, Button, Popconfirm } from 'antd';\nimport '../../styles/components/GameStateListItem.scss';\n\nconst GameStateListItem = ({\n  gameState,\n  onEditGameStateProp = () => {},\n  onRemoveGameStateProp = () => {},\n}) => {\n\n  let defaultValue;\n  if (gameState.type.endsWith('arr')) {\n    defaultValue = '[ ' + gameState.default + ' ]';\n  } else {\n    if(gameState.type === 'boolean') {\n      defaultValue = gameState.default ? 'true' : 'false';\n    } else {\n      defaultValue = gameState.default;\n    }\n  }\n\n  return (\n    <List.Item className='game-state-list-item'>\n      <Row>\n        <Col span={6}>{gameState.name}</Col>\n        <Col span={6}>{gameState.type}</Col>\n        <Col span={8}>{defaultValue}</Col>\n        <Col span={4} style={{textAlign: 'right'}}>\n          {gameState.edit_mode !== 'none' &&\n            <Button type='link' size='small' onClick={() => { onEditGameStateProp() }}>Edit</Button>\n          }\n          {gameState.removable &&\n            <Popconfirm\n              title={`Are you sure you want to remove this game state prop?`}\n              onConfirm={() => { onRemoveGameStateProp() }}\n              onCancel={() => {}}\n              okText='Yes'\n              cancelText='No'\n              placement='bottomRight'\n            >\n              <Button type='link' size='small'>Remove</Button>\n            </Popconfirm>\n          }\n        </Col>\n      </Row>\n    </List.Item>\n  );\n};\n\nexport default GameStateListItem;\n","import { useState, useEffect, useContext, Fragment } from 'react';\nimport { Drawer, Form, Button, Col, Row, Input, InputNumber, Select, Switch, message } from 'antd';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\nimport AppValidationsController from '../../controllers/AppValidationsController';\nimport { useLiveQuery } from 'dexie-react-hooks';\nimport db from '../../db/AppDatabase';\n\nconst { TextArea } = Input;\nconst { Option } = Select;\n\nconst AddEditGameStateProp = ({ gameStateProp = null, isDrawerVisible, onDrawerClose }) => {\n  const [,dispatch] = useContext(AppContext);\n  const [form] = Form.useForm();\n  const [visible, setVisible] = useState(false);\n  const [name, setName] = useState('');\n  const [type, setType] = useState('');\n  const [defaultValueInt, setDefaultValueInt] = useState(0);\n  const [defaultValueBool, setDefaultValueBool] = useState(true);\n  const [defaultValueString, setDefaultValueString] = useState('');\n  const [defaultValueArray, setDefaultValueArray] = useState(true);\n\n  const customEntityDefs = useLiveQuery(() => db.custom_entity_defs.toArray());\n\n  useEffect(() => {\n    const populateDefault = (defaultValue) => {\n      if(!type.endsWith('arr')) { //not array\n        switch(type) {\n          case 'int':\n            form.setFieldsValue({defaultValueInt: defaultValue});\n            break;\n          case 'boolean':\n            form.setFieldsValue({defaultValueBool: defaultValue});\n            setDefaultValueBool(defaultValue);\n            break;\n          case 'string':\n          case 'location':\n          case 'area':\n          case 'character':\n          default: //custom entity\n            form.setFieldsValue({defaultValueString: defaultValue});\n            break;\n        }\n      } else { //array\n        if(defaultValue.length === 0) {\n          return;\n        }\n        const valuesArray = defaultValue.split(',');\n        switch(type) {\n          case 'intarr':\n          case 'booleanarr':\n            form.setFieldsValue({defaultValueArray: valuesArray.join('\\n')});\n            break;\n          case 'stringarr':\n          case 'locationarr':\n          case 'areaarr':\n          case 'characterarr':\n          default: //custom entity array\n            let unquotedEntries = [];\n            for (const entry of valuesArray) {\n              unquotedEntries.push(entry.slice(1, -1));\n            }\n            form.setFieldsValue({defaultValueArray: unquotedEntries.join('\\n')});\n            break;\n        }\n      }\n    };\n\n    if(isDrawerVisible) { //opening drawer\n      form.resetFields();\n      setType('');\n      if (gameStateProp) {\n        form.setFieldsValue({name: gameStateProp.name, type: gameStateProp.type});\n        setType(gameStateProp.type);\n        populateDefault(gameStateProp.default);\n      }\n      openDrawer();\n    }\n  }, [isDrawerVisible, form, gameStateProp]); // eslint-disable-line\n\n  const openDrawer = () => {\n    setVisible(true);\n  };\n\n  const closeDrawer = () => {\n    setVisible(false);\n    onDrawerClose && onDrawerClose();\n  };\n\n  const handleTypeChange = (value) => {\n    if(value === 'int') {\n      form.setFieldsValue({defaultValueInt: ''});\n    }\n    if(value === 'boolean') {\n      form.setFieldsValue({defaultValueBool: defaultValueBool});\n    }\n    if(value.endsWith('arr')){\n      form.setFieldsValue({defaultValueArray: ''});\n    }\n    if(value !== '' && value !== 'int' && value !== 'boolean' && !value.endsWith('arr')){\n      form.setFieldsValue({defaultValueString: ''});\n    }\n    setType(value);\n  };\n\n  const displaySingleLineDefaultField = () => {\n    return type !== '' && type !== 'int' && type !== 'boolean' && !type.endsWith('arr');\n  };\n\n  const displayArrayDefaultField = () => {\n    return type.endsWith('arr');\n  };\n\n  const arrayFieldLabelAndPlaceholder = (label = true) => {\n    switch(type) {\n      case 'intarr':\n        return label ? 'int[]' : 'Place one integer per line';\n      case 'booleanarr':\n        return label ? 'boolean[]' : 'Place one boolean per line';\n      case 'stringarr':\n        return label ? 'string[]' : 'Place one string per line';\n      case 'locationarr':\n        return label ? 'location[]' : 'Place one location per line';\n      case 'areaarr':\n        return label ? 'area[]' : 'Place one area per line';\n      case 'characterarr':\n        return label ? 'character[]' : 'Place one character per line';\n      default:\n        if(type.endsWith('arr')) {\n          const singular_name = type.slice(0, -3);\n          return label ? singular_name+'[]' : 'Place one '+singular_name+' per line';\n        } else {\n          return label ? '[]' : 'Place one item per line';\n        }\n    }\n  };\n\n  const onFinish = (values) => {\n    const name = values.name.trim();\n    if(name === ''){\n      message.error('Do not leave name empty');\n      return;\n    }\n    //validate type & default value\n    switch(type) {\n      case 'int':\n        if(!Number.isInteger(parseInt(values.defaultValueInt))){\n          message.error('Default is not an integer');\n        } else {\n          saveGameStateProp(values);\n        }\n        break;\n      case 'boolean':\n      case 'string':\n        saveGameStateProp(values);\n        break;\n      case 'location':\n        const defaultLocation = values.defaultValueString.trim();\n        AppValidationsController.validateEntityNames([defaultLocation], db.locations).then(() => {\n          saveGameStateProp(values);\n        }).catch(invalidLocations => {\n          message.error('Invalid values: ' + invalidLocations.join(', '));\n        });\n        break;\n      case 'area':\n        const defaultArea = values.defaultValueString.trim();\n        AppValidationsController.validateEntityNames([defaultArea], db.areas).then(() => {\n          saveGameStateProp(values);\n        }).catch(invalidAreas => {\n          message.error('Invalid values: ' + invalidAreas.join(', '));\n        });\n        break;\n      case 'character':\n        const defaultCharacter = values.defaultValueString.trim();\n        AppValidationsController.validateEntityNames([defaultCharacter], db.characters).then(() => {\n          saveGameStateProp(values);\n        }).catch(invalidCharacters => {\n          message.error('Invalid values: ' + invalidCharacters.join(', '));\n        });\n        break;\n      default:\n        if(!type.endsWith('arr')) { \n          if(type !== 'boolean' && type !== 'string') { //custom entity\n            const customEntityDef = customEntityDefs.find(customEntityDef => customEntityDef.singular_name === type);\n            if (customEntityDef) {\n              const defaultEntity = values.defaultValueString.trim();\n              AppValidationsController.validateCustomEntityNames([defaultEntity], customEntityDef.id).then(() => {\n                saveGameStateProp(values);\n              }).catch(invalidEntities => {\n                message.error('Invalid values: ' + invalidEntities.join(', '));\n              });\n            }\n          }\n        } else { //any array type\n          valudateArrayTypes(values)\n        }\n        break;\n    }\n  };\n\n  const valudateArrayTypes = (values) => {\n    const defaultValues = values.defaultValueArray;\n    if(defaultValues.length === 0) {\n      saveGameStateProp(values);\n    } else {\n      const valuesArray = defaultValues.split('\\n');\n      switch(type) {\n        case 'intarr':\n          for (const integerValue of valuesArray) {\n            if(!Number.isInteger(parseInt(integerValue))){\n              message.error('All values in array must be integers');\n              return;\n            }\n          }\n          saveGameStateProp(values);\n          break;\n        case 'booleanarr':\n          for (const booleanValue of valuesArray) {\n            if(!(booleanValue === 'true' || booleanValue === 'false')){\n              message.error('All values in array must be \"true\" or \"false\"');\n              return;\n            }\n          }\n          saveGameStateProp(values);\n          break;\n        case 'stringarr':\n          for (const stringValue of valuesArray) {\n            if(stringValue.trim() === ''){\n              message.error('Do not leave empty strings (just spaces are considered empty)');\n              return;\n            }\n          }\n          saveGameStateProp(values);\n          break;\n        case 'locationarr':\n          AppValidationsController.validateEntityNames(valuesArray, db.locations).then(() => {\n            saveGameStateProp(values);\n          }).catch(invalidLocations => {\n            message.error('Invalid values: ' + invalidLocations.join(', '));\n          });\n          break;\n        case 'areaarr':\n          AppValidationsController.validateEntityNames(valuesArray, db.areas).then(() => {\n            saveGameStateProp(values);\n          }).catch(invalidAreas => {\n            message.error('Invalid values: ' + invalidAreas.join(', '));\n          });\n          break;\n        case 'characterarr':\n          AppValidationsController.validateEntityNames(valuesArray, db.characters).then(() => {\n            saveGameStateProp(values);\n          }).catch(invalidCharacters => {\n            message.error('Invalid values: ' + invalidCharacters.join(', '));\n          });\n          break;\n        default: //custom entities\n          const singular_name = type.slice(0, -3);\n          const customEntityDef = customEntityDefs.find(customEntityDef => customEntityDef.singular_name === singular_name);\n          if (customEntityDef) {\n            AppValidationsController.validateCustomEntityNames(valuesArray, customEntityDef.id).then(() => {\n              saveGameStateProp(values);\n            }).catch(invalidEntities => {\n              message.error('Invalid values: ' + invalidEntities.join(', '));\n            });\n          }\n          break;\n      }\n    }\n  };\n\n  const saveGameStateProp = (values) => {\n    if (gameStateProp === null) { //new gameStateProp\n      const name = values.name.trim();\n      const defaultValue = getDefaultValue(values);\n      const editMode = 'name|default';\n      const removable = true;\n      const newData = {name, type, defaultValue, editMode, removable};\n      AppLogicController.createNewGameStateProp(dispatch, newData).then(result => {\n        closeDrawer();\n        message.success('New game state prop created!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    } else { //editing gameStateProp\n      const name = values.name.trim();\n      const defaultValue = getDefaultValue(values);\n      const editMode = gameStateProp.edit_mode;\n      const removable = gameStateProp.removable;\n      const editData = {name, type, defaultValue, editMode, removable};\n      AppLogicController.updateGameStateProp(dispatch, gameStateProp.id, editData).then(result => {\n        closeDrawer();\n        message.success('Game state prop edited!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    }\n  };\n\n  const getDefaultValue = (values) => {\n    if(!type.endsWith('arr')) { //not array\n      switch(type) {\n        case 'int':\n          return parseInt(values.defaultValueInt);\n        case 'boolean':\n          return values.defaultValueBool;\n        case 'string':\n        case 'location':\n        case 'area':\n        case 'character':\n        default: //custom entity\n          return values.defaultValueString;\n      }\n    } else { //array\n      const defaultValues = values.defaultValueArray;\n      if(defaultValues.length === 0) {\n        return '';\n      }\n      const valuesArray = defaultValues.split('\\n');\n      switch(type) {\n        case 'intarr':\n        case 'booleanarr':\n          return valuesArray.join(',');\n        case 'stringarr':\n        case 'locationarr':\n        case 'areaarr':\n        case 'characterarr':\n        default: //custom entity array\n          let quotesWrappedEntries = [];\n          for (const entry of valuesArray) {\n            quotesWrappedEntries.push('\"' + entry + '\"');\n          }\n          return quotesWrappedEntries.join(',');\n      }\n    }\n  };\n\n  const isNameDisabled = () => {\n    if(gameStateProp === null) {\n      return false;\n    } else {\n      const editMode = gameStateProp.edit_mode.split('|');\n      return editMode.indexOf('all') < 0 && editMode.indexOf('name') < 0;\n    } \n  };\n\n  const isTypeDisabled = () => {\n    if(gameStateProp === null) {\n      return false;\n    } else {\n      const editMode = gameStateProp.edit_mode.split('|');\n      return editMode.indexOf('all') < 0 && editMode.indexOf('type') < 0;\n    } \n  };\n\n  const isDefaultDisabled = () => {\n    if(gameStateProp === null) {\n      return false;\n    } else {\n      const editMode = gameStateProp.edit_mode.split('|');\n      return editMode.indexOf('all') < 0 && editMode.indexOf('default') < 0;\n    } \n  };\n\n  return (\n    <Drawer\n      title={(gameStateProp === null) ? 'New prop' : 'Edit prop'}\n      width={360}\n      onClose={closeDrawer}\n      visible={visible}\n      bodyStyle={{ paddingBottom: 20 }}\n      footer={\n        <div style={{textAlign: 'right'}} >\n          <Button onClick={closeDrawer} style={{ marginRight: 8 }}>\n            Cancel\n          </Button>\n          <Button type=\"primary\" htmlType=\"submit\" form='add-edit-game-state-prop-id'>\n            {(gameStateProp === null) ? 'Create' : 'Update'}\n          </Button>\n        </div>\n      }\n    >\n      <Form layout='vertical' name='add-edit-game-state-prop' id='add-edit-game-state-prop-id' form={form} onFinish={onFinish} requiredMark={false}>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"name\"\n              label=\"Name\"\n              rules={[{ required: true, message: 'Please enter a name' }]}\n            >\n              <Input placeholder=\"Please enter a name\" value={name} onChange={(e) => { setName(e.target.value) }} disabled={isNameDisabled()} />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"type\"\n              label=\"Type\"\n              rules={[{ required: true, message: 'Please select a type' }]}\n            >\n              <Select value={type} onChange={(e) => { handleTypeChange(e) }} disabled={isTypeDisabled()}>\n                <Option value='int'>int</Option>\n                <Option value='intarr'>int[]</Option>\n                <Option value='boolean'>boolean</Option>\n                <Option value='booleanarr'>boolean[]</Option>\n                <Option value='string'>string</Option>\n                <Option value='stringarr'>string[]</Option>\n                <Option value='location'>location</Option>\n                <Option value='locationarr'>location[]</Option>\n                <Option value='area'>area</Option>\n                <Option value='areaarr'>area[]</Option>\n                <Option value='character'>character</Option>\n                <Option value='characterarr'>character[]</Option>\n                { customEntityDefs !== undefined && customEntityDefs.map((customEntityDef) =>\n                  <Fragment key={customEntityDef.singular_name}>\n                    <Option value={customEntityDef.singular_name}>{customEntityDef.singular_name}</Option>\n                    <Option value={customEntityDef.singular_name + 'arr'}>{customEntityDef.singular_name}[]</Option>\n                  </Fragment>\n                  )\n                }\n              </Select>\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16} style={{display: (type === 'int' ? 'block' : 'none')}}>\n          <Col span={24}>\n            <Form.Item\n              name=\"defaultValueInt\"\n              label=\"Default value (int)\"\n              rules={[{ required: (type === 'int'), message: 'Please enter an integer' }]}\n            >\n              <InputNumber disabled={isDefaultDisabled()} placeholder=\"Please enter an integer\" value={defaultValueInt} onChange={(e) => { setDefaultValueInt(e) }} style={{width: '100%'}} />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16} style={{display: (type === 'boolean' ? 'block' : 'none')}}>\n          <Col span={24}>\n            <Form.Item\n              name=\"defaultValueBool\"\n              label=\"Default value (boolean)\"\n            >\n              <Switch disabled={isDefaultDisabled()} checkedChildren=\"true\" unCheckedChildren=\"false\" checked={defaultValueBool} defaultChecked onChange={(e) => { setDefaultValueBool(e) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16} style={{display: (displaySingleLineDefaultField() ? 'block' : 'none')}}>\n          <Col span={24}>\n            <Form.Item\n              name=\"defaultValueString\"\n              label=\"Default value (string)\"\n              rules={[{ required: displaySingleLineDefaultField() && type !== 'string', message: 'Please enter a default value' }]}\n            >\n              <Input disabled={isDefaultDisabled()} placeholder=\"Please enter a default value\" value={defaultValueString} onChange={(e) => { setDefaultValueString(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16} style={{display: (displayArrayDefaultField() ? 'block' : 'none')}}>\n          <Col span={24}>\n            <Form.Item\n              name=\"defaultValueArray\"\n              label={'Default value (' + arrayFieldLabelAndPlaceholder() + ')'}\n            >\n              <TextArea disabled={isDefaultDisabled()} rows={10} placeholder={arrayFieldLabelAndPlaceholder(false) + ' Leave empty for empty array.'} value={defaultValueArray} onChange={(e) => { setDefaultValueArray(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n      </Form>\n    </Drawer>\n  );\n};\n\nexport default AddEditGameStateProp;\n","import { useState, useContext } from 'react';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\nimport { useLiveQuery } from 'dexie-react-hooks';\nimport db from '../../db/AppDatabase';\nimport GameStateListItem from '../entity_views/GameStateListItem';\nimport { List, Row, Col, Typography, Button, message } from 'antd';\nimport AddEditGameStateProp from '../drawers/AddEditGameStateProp';\n\nconst { Text } = Typography;\n\nconst GameStateConfigSection = () => {\n  const [,dispatch] = useContext(AppContext);\n  const [addEditGameStatePropVisible, setAddEditGameStatePropVisible] = useState(false);\n  const [currentGameStateProp, setCurrentGameStateProp] = useState(null);\n\n  const gameStates = useLiveQuery(() => db.game_state_props.toArray());\n\n  const addGameStateProp = () => {\n    setCurrentGameStateProp(null);\n    setAddEditGameStatePropVisible(true);\n  };\n\n  const editGameStateProp = (gameStateProp) => {\n    setCurrentGameStateProp(gameStateProp);\n    setAddEditGameStatePropVisible(true);\n  };\n\n  const removeGameStateProp = (gameStateProp) => {\n    AppLogicController.deleteGameStateProp(dispatch, gameStateProp.id).then(result => {\n      message.success('Game state prop removed!');\n    }).catch(error => {\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  const header = (\n    <Row>\n      <Col span={6}><Text strong>Name</Text></Col>\n      <Col span={6}><Text strong>Type</Text></Col>\n      <Col span={8}><Text strong>Default</Text></Col>\n      <Col span={4}></Col>\n    </Row>\n  );\n\n  return (\n    <div>\n      { (gameStates !== undefined && gameStates.length > 0) && \n        <List\n          style={{marginBottom: '20px', maxWidth: '94%'}}\n          header={header}\n          dataSource={gameStates}\n          renderItem={item => (\n            <GameStateListItem\n              gameState={item}\n              onEditGameStateProp={() => { editGameStateProp(item); }} \n              onRemoveGameStateProp={() => { removeGameStateProp(item); }} \n            />\n          )}\n        />\n      }\n      <Button type='primary' onClick={addGameStateProp}>\n        Add Game State Prop\n      </Button>\n      <AddEditGameStateProp\n        gameStateProp={currentGameStateProp}\n        isDrawerVisible={addEditGameStatePropVisible} \n        onDrawerClose={() => { setAddEditGameStatePropVisible(false); }} \n      />\n    </div>\n  );\n};\n\nexport default GameStateConfigSection;","import { Card, Divider, Typography, Button, List, Row, Col, Popconfirm } from 'antd';\nimport { useLiveQuery } from 'dexie-react-hooks';\nimport db from '../../db/AppDatabase';\nimport '../../styles/components/LocationView.scss';\n\nconst { Text } = Typography;\n\nconst LocationView = ({ \n  location,  \n  canEdit = true, \n  canRemove = true,\n  onRemove = () => {},\n  onEdit = () => {},\n  //\n  onAddArea = () => {},\n  onEditArea = () => {},\n  onRemoveArea = () => {},\n}) => {\n\n  const areas = useLiveQuery(() => db.areas.where('location_id').equals(location.id).toArray());\n\n  const options = [];\n  if(canEdit) {\n    options.push(<Button key='edit-location' type='link' size='small' onClick={onEdit}>Edit</Button>);\n  }\n  if(canRemove) {\n    options.push(\n      <Popconfirm\n        key='remove-location'\n        title={`Are you sure you want to remove this location and all its areas?`}\n        onConfirm={onRemove}\n        onCancel={() => {}}\n        okText='Yes'\n        cancelText='No'\n        placement='bottomRight'\n      >\n        <Button type='link' size='small'>Remove</Button>\n      </Popconfirm>\n    );\n  }\n\n  const header = (\n    <Row>\n      <Col span={6}><Text strong>Area Name</Text></Col>\n      <Col span={12}><Text strong>Description</Text></Col>\n      <Col span={6}></Col>\n    </Row>\n  );\n\n  return (\n    <Card className='location-view' size='small' title={location.name} extra={options} headStyle={{ background: '#f5f5f5'}} >\n      <Text>{location.description}</Text>\n      <Divider />\n      { (areas !== undefined && areas.length > 0) && \n        <List\n          header={header}\n          dataSource={areas}\n          renderItem={area => (\n            <List.Item className='area-list-item'>\n              <Row>\n                <Col span={6}>{area.name}</Col>\n                <Col span={12}>{area.description}</Col>\n                <Col span={6} style={{textAlign: 'right'}}>\n                  <Button type='link' size='small' onClick={() => { onEditArea(area) }}>Edit</Button>\n                  <Popconfirm\n                    title={`Are you sure you want to remove this area?`}\n                    onConfirm={() => { onRemoveArea(area) }}\n                    onCancel={() => {}}\n                    okText='Yes'\n                    cancelText='No'\n                    placement='bottomRight'\n                  >\n                    <Button type='link' size='small'>Remove</Button>\n                  </Popconfirm>\n                </Col>\n              </Row>\n            </List.Item>\n          )}\n        />\n      }\n      <Button type='default' size='small' onClick={onAddArea}>\n        Add Area\n      </Button>\n    </Card>\n  );\n};\n\nexport default LocationView;\n","import { useState, useEffect, useContext } from 'react';\nimport { Drawer, Form, Button, Col, Row, Input, message } from 'antd';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\n\nconst { TextArea } = Input;\n\nconst AddEditLocation = ({ location = null, isDrawerVisible, onDrawerClose }) => {\n  const [,dispatch] = useContext(AppContext);\n  const [form] = Form.useForm();\n  const [visible, setVisible] = useState(false);\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n\n  useEffect(() => {\n    if(isDrawerVisible) { //opening drawer\n      form.resetFields();\n      if (location) {\n        form.setFieldsValue({name: location.name, description: location.description});\n      }\n      openDrawer();\n    }\n  }, [isDrawerVisible, form, location]);\n\n  const openDrawer = () => {\n    setVisible(true);\n  };\n\n  const closeDrawer = () => {\n    setVisible(false);\n    onDrawerClose && onDrawerClose();\n  };\n\n  const onFinish = (values) => {\n    const name = values.name.trim();\n    const description = values.description.trim();\n    if(name === '' || description === ''){\n      closeDrawer();\n      message.error('Do not leave empty fields, sorry :(');\n      return;\n    }\n    const data = {name, description};\n    if (location === null) { //new location\n      AppLogicController.createNewLocation(dispatch, data).then(result => {\n        closeDrawer();\n        message.success('New location created!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    } else { //editing location\n      AppLogicController.updateLocation(dispatch, location.id, data).then(result => {\n        closeDrawer();\n        message.success('Location edited!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    }\n  };\n\n  return (\n    <Drawer\n      title={(location === null) ? 'New location' : 'Edit location'}\n      width={360}\n      onClose={closeDrawer}\n      visible={visible}\n      bodyStyle={{ paddingBottom: 20 }}\n      footer={\n        <div style={{textAlign: 'right'}} >\n          <Button onClick={closeDrawer} style={{ marginRight: 8 }}>\n            Cancel\n          </Button>\n          <Button type=\"primary\" htmlType=\"submit\" form='add-edit-location-id'>\n            {(location === null) ? 'Create' : 'Update'}\n          </Button>\n        </div>\n      }\n    >\n      <Form layout='vertical' name='add-edit-location' id='add-edit-location-id' form={form} onFinish={onFinish} requiredMark={false}>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"name\"\n              label=\"Name\"\n              rules={[{ required: true, message: 'Please enter a name' }]}\n            >\n              <Input placeholder=\"Please enter a name\" value={name} onChange={(e) => { setName(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"description\"\n              label=\"Description\"\n              rules={[{ required: true, message: 'Please enter a description' }]}\n            >\n              <TextArea rows={10} placeholder=\"Please enter a description\" value={description} onChange={(e) => { setDescription(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n      </Form>\n    </Drawer>\n  );\n};\n\nexport default AddEditLocation;\n","import { useState, useEffect, useContext } from 'react';\nimport { Drawer, Form, Button, Col, Row, Input, message } from 'antd';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\n\nconst { TextArea } = Input;\n\nconst AddEditArea = ({ area = null, location, isDrawerVisible, onDrawerClose }) => {\n  const [,dispatch] = useContext(AppContext);\n  const [form] = Form.useForm();\n  const [visible, setVisible] = useState(false);\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n\n  useEffect(() => {\n    if(isDrawerVisible) { //opening drawer\n      form.resetFields();\n      if (area) {\n        form.setFieldsValue({name: area.name, description: area.description});\n      }\n      openDrawer();\n    }\n  }, [isDrawerVisible, form, area]);\n\n  const openDrawer = () => {\n    setVisible(true);\n  };\n\n  const closeDrawer = () => {\n    setVisible(false);\n    onDrawerClose && onDrawerClose();\n  };\n\n  const onFinish = (values) => {\n    const name = values.name.trim();\n    const description = values.description.trim();\n    if(name === '' || description === ''){\n      closeDrawer();\n      message.error('Do not leave empty fields, sorry :(');\n      return;\n    }\n    let data = {name, description};\n    if (area === null) { //new area\n      data.location_id = location.id;\n      AppLogicController.createNewArea(dispatch, data).then(result => {\n        closeDrawer();\n        message.success('New area created!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    } else { //editing area\n      AppLogicController.updateArea(dispatch, area.id, data).then(result => {\n        closeDrawer();\n        message.success('Area edited!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    }\n  };\n\n  return (\n    <Drawer\n      title={((area === null) ? 'New area' : 'Edit area') + ' in ' + (location && location.name)}\n      width={360}\n      onClose={closeDrawer}\n      visible={visible}\n      bodyStyle={{ paddingBottom: 20 }}\n      footer={\n        <div style={{textAlign: 'right'}} >\n          <Button onClick={closeDrawer} style={{ marginRight: 8 }}>\n            Cancel\n          </Button>\n          <Button type=\"primary\" htmlType=\"submit\" form='add-edit-area-id'>\n            {(area === null) ? 'Create' : 'Update'}\n          </Button>\n        </div>\n      }\n    >\n      <Form layout='vertical' name='add-edit-area' id='add-edit-area-id' form={form} onFinish={onFinish} requiredMark={false}>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"name\"\n              label=\"Name\"\n              rules={[{ required: true, message: 'Please enter a name' }]}\n            >\n              <Input placeholder=\"Please enter a name\" value={name} onChange={(e) => { setName(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"description\"\n              label=\"Description\"\n              rules={[{ required: true, message: 'Please enter a description' }]}\n            >\n              <TextArea rows={10} placeholder=\"Please enter a description\" value={description} onChange={(e) => { setDescription(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n      </Form>\n    </Drawer>\n  );\n};\n\nexport default AddEditArea;\n","import { useState, useContext } from 'react';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\nimport { Button, message } from 'antd';\nimport { useLiveQuery } from 'dexie-react-hooks';\nimport db from '../../db/AppDatabase';\nimport LocationView from '../entity_views/LocationView';\nimport AddEditLocation from '../drawers/AddEditLocation';\nimport AddEditArea from '../drawers/AddEditArea';\n\nconst LocationConfigSection = () => {\n  const [,dispatch] = useContext(AppContext);\n  const [addEditLocationVisible, setAddEditLocationVisible] = useState(false);\n  const [addEditAreaVisible, setAddEditAreaVisible] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState(null);\n  const [currentArea, setCurrentArea] = useState(null);\n\n  const locations = useLiveQuery(() => db.locations.toArray());\n\n  //location handlers\n  const addLocation = () => {\n    setCurrentLocation(null);\n    setAddEditLocationVisible(true);\n  };\n\n  const editLocation = (location) => {\n    setCurrentLocation(location);\n    setAddEditLocationVisible(true);\n  };\n\n  const removeLocation = (location) => {\n    AppLogicController.deleteLocation(dispatch, location.id).then(result => {\n      message.success('Location removed!');\n    }).catch(error => {\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  //area handlers\n  const addArea = (location) => {\n    setCurrentArea(null);\n    setCurrentLocation(location);\n    setAddEditAreaVisible(true);\n  };\n\n  const editArea = (area, location) => {\n    setCurrentLocation(location);\n    setCurrentArea(area);\n    setAddEditAreaVisible(true);\n  };\n\n  const removeArea = (area) => {\n    AppLogicController.deleteArea(dispatch, area.id).then(result => {\n      message.success('Area removed!');\n    }).catch(error => {\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  return (\n    <div>\n      { locations !== undefined && locations.map(location =>\n        <LocationView \n          key={location.id} \n          location={location} \n          onRemove={() => { removeLocation(location) }} \n          onEdit={() => { editLocation(location) }} \n          onAddArea={() => { addArea(location) }} \n          onEditArea={(area) => { editArea(area, location) }}\n          onRemoveArea={(area) => { removeArea(area) }}\n        />\n        )\n      }\n      <Button type='primary' onClick={addLocation}>\n        Add Location\n      </Button>\n      <AddEditLocation\n        location={currentLocation}\n        isDrawerVisible={addEditLocationVisible} \n        onDrawerClose={() => { setAddEditLocationVisible(false); }} \n      />\n      <AddEditArea\n        area={currentArea}\n        location={currentLocation}\n        isDrawerVisible={addEditAreaVisible} \n        onDrawerClose={() => { setAddEditAreaVisible(false); }} \n      />\n    </div>\n  );\n};\n\nexport default LocationConfigSection;\n","import { Card, Typography, Button, Popconfirm } from 'antd';\nimport '../../styles/components/SimpleEntityView.scss';\n\nconst { Text } = Typography;\n\nconst SimpleEntityView = ({ \n  entity, \n  entityName = 'entity', \n  canEdit = true, \n  canRemove = true,\n  onRemove = () => {},\n  onEdit = () => {},\n}) => {\n\n  const options = [];\n  if(canEdit) {\n    options.push(<Button key='edit-entity' type='link' size='small' onClick={onEdit}>Edit</Button>);\n  }\n  if(canRemove) {\n    options.push(\n      <Popconfirm\n        key='remove-entity'\n        title={`Are you sure you want to remove this ${entityName}?`}\n        onConfirm={onRemove}\n        onCancel={() => {}}\n        okText='Yes'\n        cancelText='No'\n        placement='bottomRight'\n      >\n        <Button type='link' size='small'>Remove</Button>\n      </Popconfirm>\n    );\n  }\n\n  return (\n    <Card className='simple-entity-view' size='small' title={entity.name} extra={options} headStyle={{ background: '#f5f5f5'}} >\n      <Text>{entity.description}</Text>\n    </Card>\n  );\n};\n\nexport default SimpleEntityView;\n","import { useState, useEffect, useContext } from 'react';\nimport { Drawer, Form, Button, Col, Row, Input, message } from 'antd';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\n\nconst { TextArea } = Input;\n\nconst AddEditCharacter = ({ character = null, isDrawerVisible, onDrawerClose }) => {\n  const [,dispatch] = useContext(AppContext);\n  const [form] = Form.useForm();\n  const [visible, setVisible] = useState(false);\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n\n  useEffect(() => {\n    if(isDrawerVisible) { //opening drawer\n      form.resetFields();\n      if (character) {\n        form.setFieldsValue({name: character.name, description: character.description});\n      }\n      openDrawer();\n    }\n  }, [isDrawerVisible, form, character]);\n\n  const openDrawer = () => {\n    setVisible(true);\n  };\n\n  const closeDrawer = () => {\n    setVisible(false);\n    onDrawerClose && onDrawerClose();\n  };\n\n  const onFinish = (values) => {\n    const name = values.name.trim();\n    const description = values.description.trim();\n    if(name === '' || description === ''){\n      closeDrawer();\n      message.error('Do not leave empty fields, sorry :(');\n      return;\n    }\n    const data = {name, description};\n    if (character === null) { //new character\n      AppLogicController.createNewCharacter(dispatch, data).then(result => {\n        closeDrawer();\n        message.success('New character created!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    } else { //editing character\n      AppLogicController.updateCharacter(dispatch, character.id, data).then(result => {\n        closeDrawer();\n        message.success('Character edited!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    }\n  };\n\n  return (\n    <Drawer\n      title={(character === null) ? 'New character' : 'Edit character'}\n      width={360}\n      onClose={closeDrawer}\n      visible={visible}\n      bodyStyle={{ paddingBottom: 20 }}\n      footer={\n        <div style={{textAlign: 'right'}} >\n          <Button onClick={closeDrawer} style={{ marginRight: 8 }}>\n            Cancel\n          </Button>\n          <Button type=\"primary\" htmlType=\"submit\" form='add-edit-character-id'>\n            {(character === null) ? 'Create' : 'Update'}\n          </Button>\n        </div>\n      }\n    >\n      <Form layout='vertical' name='add-edit-character' id='add-edit-character-id' form={form} onFinish={onFinish} requiredMark={false}>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"name\"\n              label=\"Name\"\n              rules={[{ required: true, message: 'Please enter a name' }]}\n            >\n              <Input placeholder=\"Please enter a name\" value={name} onChange={(e) => { setName(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"description\"\n              label=\"Description\"\n              rules={[{ required: true, message: 'Please enter a description' }]}\n            >\n              <TextArea rows={10} placeholder=\"Please enter a description\" value={description} onChange={(e) => { setDescription(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n      </Form>\n    </Drawer>\n  );\n};\n\nexport default AddEditCharacter;\n","import { useState, useContext } from 'react';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\nimport { Button, message } from 'antd';\nimport { useLiveQuery } from 'dexie-react-hooks';\nimport db from '../../db/AppDatabase';\nimport SimpleEntityView from '../entity_views/SimpleEntityView';\nimport AddEditCharacter from '../drawers/AddEditCharacter';\n\nconst CharacterConfigSection = () => {\n  const [,dispatch] = useContext(AppContext);\n  const [addEditCharacterVisible, setAddEditCharacterVisible] = useState(false);\n  const [currentCharacter, setCurrentCharacter] = useState(null);\n\n  const characters = useLiveQuery(() => db.characters.toArray());\n\n  const addCharacter = () => {\n    setCurrentCharacter(null);\n    setAddEditCharacterVisible(true);\n  };\n\n  const editCharacter = (character) => {\n    setCurrentCharacter(character);\n    setAddEditCharacterVisible(true);\n  };\n\n  const removeCharacter = (character) => {\n    AppLogicController.deleteCharacter(dispatch, character.id).then(result => {\n      message.success('Character removed!');\n    }).catch(error => {\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  return (\n    <div>\n      { characters !== undefined && characters.map(character =>\n        <SimpleEntityView \n          key={character.id} \n          entity={character} \n          entityName='character' \n          onRemove={() => { removeCharacter(character) }} \n          onEdit={() => { editCharacter(character) }} \n        />\n        )\n      }\n      <Button type='primary' onClick={addCharacter}>\n        Add Character\n      </Button>\n      <AddEditCharacter\n        character={currentCharacter}\n        isDrawerVisible={addEditCharacterVisible} \n        onDrawerClose={() => { setAddEditCharacterVisible(false); }} \n      />\n    </div>\n  );\n};\n\nexport default CharacterConfigSection;\n","import { useState, useEffect, useContext } from 'react';\nimport { Drawer, Form, Button, Col, Row, Input, message } from 'antd';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\n\nconst { TextArea } = Input;\n\nconst AddEditCustomEntity = ({ entity = null, entityDef, isDrawerVisible, onDrawerClose }) => {\n  const [,dispatch] = useContext(AppContext);\n  const [form] = Form.useForm();\n  const [visible, setVisible] = useState(false);\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const singularCapitalized = entityDef.singular_name.toLowerCase().charAt(0).toUpperCase() + entityDef.singular_name.toLowerCase().slice(1);\n\n  useEffect(() => {\n    if(isDrawerVisible) { //opening drawer\n      form.resetFields();\n      if (entity) {\n        form.setFieldsValue({name: entity.name, description: entity.description});\n      }\n      openDrawer();\n    }\n  }, [isDrawerVisible, form, entity]);\n\n  const openDrawer = () => {\n    setVisible(true);\n  };\n\n  const closeDrawer = () => {\n    setVisible(false);\n    onDrawerClose && onDrawerClose();\n  };\n\n  const onFinish = (values) => {\n    const name = values.name.trim();\n    const description = values.description.trim();\n    if(name === '' || description === ''){\n      closeDrawer();\n      message.error('Do not leave empty fields, sorry :(');\n      return;\n    }\n    let data = {name, description};\n    if (entity === null) { //new entity\n      data.custom_entity_def_id = entityDef.id;\n      AppLogicController.createNewCustomEntity(dispatch, data).then(result => {\n        closeDrawer();\n        message.success('New ' + entityDef.singular_name.toLowerCase() + ' created!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    } else { //editing entity\n      AppLogicController.updateCustomEntity(dispatch, entity.id, data).then(result => {\n        closeDrawer();\n        message.success(singularCapitalized + ' edited!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    }\n  };\n\n  return (\n    <Drawer\n      title={((entity === null) ? 'New' : 'Edit') + ' ' + entityDef.singular_name.toLowerCase()}\n      width={360}\n      onClose={closeDrawer}\n      visible={visible}\n      bodyStyle={{ paddingBottom: 20 }}\n      footer={\n        <div style={{textAlign: 'right'}} >\n          <Button onClick={closeDrawer} style={{ marginRight: 8 }}>\n            Cancel\n          </Button>\n          <Button type=\"primary\" htmlType=\"submit\" form={'add-edit-custom-entity-id-' + entityDef.key}>\n            {(entity === null) ? 'Create' : 'Update'}\n          </Button>\n        </div>\n      }\n    >\n      <Form layout='vertical' name={'add-edit-custom-entity-' + entityDef.key} id={'add-edit-custom-entity-id-' + entityDef.key} form={form} onFinish={(values) => { onFinish(values) }} requiredMark={false}>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"name\"\n              label=\"Name\"\n              rules={[{ required: true, message: 'Please enter a name' }]}\n            >\n              <Input placeholder=\"Please enter a name\" value={name} onChange={(e) => { setName(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"description\"\n              label=\"Description\"\n              rules={[{ required: true, message: 'Please enter a description' }]}\n            >\n              <TextArea rows={10} placeholder=\"Please enter a description\" value={description} onChange={(e) => { setDescription(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n      </Form>\n    </Drawer>\n  );\n};\n\nexport default AddEditCustomEntity;\n","import { useState, useContext } from 'react';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\nimport { Button, Popconfirm, message } from 'antd';\nimport { useLiveQuery } from 'dexie-react-hooks';\nimport db from '../../db/AppDatabase';\nimport SimpleEntityView from '../entity_views/SimpleEntityView';\nimport AddEditCustomEntity from '../drawers/AddEditCustomEntity';\n\nconst CustomEntityConfigSection = ({ entityDef }) => {\n  const [,dispatch] = useContext(AppContext);\n  const singularCapitalized = entityDef.singular_name.toLowerCase().charAt(0).toUpperCase() + entityDef.singular_name.toLowerCase().slice(1);\n  const [addEditCustomEntityVisible, setAddEditCustomEntityVisible] = useState(false);\n  const [currentCustomEntity, setCurrentCustomEntity] = useState(null);\n\n  const entities = useLiveQuery(() => db.custom_entities.where('custom_entity_def_id').equals(entityDef.id).toArray());\n\n  const addCustomEntity = () => {\n    setCurrentCustomEntity(null);\n    setAddEditCustomEntityVisible(true);\n  };\n\n  const editEntity = (entity) => {\n    setCurrentCustomEntity(entity);\n    setAddEditCustomEntityVisible(true);\n  };\n\n  const removeEntity = (entity) => {\n    AppLogicController.deleteCustomEntity(dispatch, entity.id).then(result => {\n      message.success(singularCapitalized + ' removed!');\n    }).catch(error => {\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  const onRemoveEntityDef = () => {\n    AppLogicController.deleteCustomEntityDef(dispatch, entityDef.id).then(result => {\n      message.success(entityDef.name + ' removed!');\n    }).catch(error => {\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  return (\n    <div>\n      <div style={{textAlign: 'right', marginBottom: '20px'}} >\n        <Popconfirm\n          key='remove-entity-def'\n          title={`This section and all its content will be removed!! Are you sure you want to remove this entity?`}\n          onConfirm={onRemoveEntityDef}\n          onCancel={() => {}}\n          okText='Yes'\n          cancelText='No'\n          placement='bottomRight'\n        >\n          <Button type='default' danger>\n            Remove entity\n          </Button>\n        </Popconfirm>\n      </div>\n      { entities !== undefined && entities.map(entity =>\n        <SimpleEntityView \n          key={entity.id} \n          entity={entity} \n          entityName={entityDef.singular_name.toLowerCase()} \n          onRemove={() => { removeEntity(entity) }} \n          onEdit={() => { editEntity(entity) }} \n        />\n        )\n      }\n      <Button type='primary' onClick={addCustomEntity}>\n        Add {singularCapitalized}\n      </Button>\n      <AddEditCustomEntity\n        entity={currentCustomEntity}\n        entityDef={entityDef}\n        isDrawerVisible={addEditCustomEntityVisible} \n        onDrawerClose={() => { setAddEditCustomEntityVisible(false); }} \n      />\n    </div>\n  );\n};\n\nexport default CustomEntityConfigSection;\n","import { useState } from 'react';\nimport { Layout, Tabs, Button } from 'antd';\nimport '../../styles/components/pages/ConfigPage.scss';\nimport { PlusSquareOutlined, BgColorsOutlined } from '@ant-design/icons';\nimport AddCustomEntity from '../drawers/AddCustomEntity';\nimport EditColors from '../drawers/EditColors';\nimport { useLiveQuery } from 'dexie-react-hooks';\nimport db from '../../db/AppDatabase';\nimport GameStateConfigSection from '../sections/GameStateConfigSection';\nimport LocationConfigSection from '../sections/LocationConfigSection';\nimport CharacterConfigSection from '../sections/CharacterConfigSection';\nimport CustomEntityConfigSection from '../sections/CustomEntityConfigSection';\n\nconst { Content } = Layout;\nconst { TabPane } = Tabs;\n\nconst ConfigPage = () => {\n  const [addCustomEntityVisible, setAddCustomEntityVisible] = useState(false);\n  const [editColorsVisible, setEditColorsVisible] = useState(false);\n\n  const customEntityDefs = useLiveQuery(() => db.custom_entity_defs.toArray());\n\n  const addCustomEntityButton = <Button size='small' key='add-custom' icon={<PlusSquareOutlined />} onClick={() => { setAddCustomEntityVisible(true); }}>Add entity</Button>;\n\n  const colorsButton = <Button size='small' key='edit-colors' icon={<BgColorsOutlined />} style={{marginRight: '4px'}} onClick={() => { setEditColorsVisible(true); }}>Colors</Button>;\n\n  const buttons = [colorsButton, addCustomEntityButton];\n\n  return (\n    <>\n      <Content className='config-page'>\n        <Tabs type=\"card\" size=\"small\" tabBarExtraContent={buttons}>\n          <TabPane tab=\"Game State\" key=\"1\">\n            <GameStateConfigSection />\n          </TabPane>\n          <TabPane tab=\"Locations\" key=\"2\">\n            <LocationConfigSection />\n          </TabPane>\n          <TabPane tab=\"Characters\" key=\"3\">\n            <CharacterConfigSection />\n          </TabPane>\n          { customEntityDefs !== undefined && customEntityDefs.map((customEntityDef, index) =>\n              <TabPane tab={customEntityDef.name} key={index + 4}>\n                <CustomEntityConfigSection entityDef={customEntityDef} />\n              </TabPane>\n            )\n          }\n        </Tabs>\n      </Content>\n      <AddCustomEntity isDrawerVisible={addCustomEntityVisible} onDrawerClose={() => { setAddCustomEntityVisible(false); }} />\n      <EditColors isDrawerVisible={editColorsVisible} onDrawerClose={() => { setEditColorsVisible(false); }} />\n    </>\n  );\n};\n\nexport default ConfigPage;\n","import { Card, Typography, Button, Popconfirm, Divider } from 'antd';\nimport { CaretUpOutlined, CaretDownOutlined } from '@ant-design/icons';\nimport '../../styles/components/entity_views/ActView.scss';\n\nconst { Text } = Typography;\n\nconst ActView = ({ \n  act,\n  actIndex = null,\n  totalActs = 0,\n  canEdit = true, \n  canRemove = true,\n  onRemove = () => {},\n  onEdit = () => {},\n  onMoveOrderUp = () => {},\n  onMoveOrderDown = () => {},\n}) => {\n\n  const options = [];\n  options.push(<Text key='act-type' type='success' style={{marginRight: '24px'}}>{(act.type === 'interactive') ? 'Interactive' : 'Sequence'}</Text>);\n  options.push(\n    <Button \n      type=\"default\"\n      key='move-up' \n      icon={<CaretUpOutlined />} \n      size='small' style={{marginRight: '4px'}} \n      disabled={actIndex === 0}\n      onClick={onMoveOrderUp} />\n  );\n  options.push(\n    <Button \n      type=\"default\" \n      key='move-down' \n      icon={<CaretDownOutlined />} \n      size='small' \n      style={{marginRight: '24px'}} \n      disabled={actIndex === (totalActs-1)}\n      onClick={onMoveOrderDown} />\n  );\n  if(canEdit) {\n    options.push(<Button key='edit-act' type='link' size='small' onClick={onEdit}>Edit</Button>);\n  }\n  if(canRemove) {\n    options.push(\n      <Popconfirm\n        key='remove-act'\n        title={() => { return (<p>Are you sure you want to remove this act?<br/>All sequence actions and end conditions associated will be removed.</p>); }}\n        onConfirm={onRemove}\n        onCancel={() => {}}\n        okText='Yes'\n        cancelText='No'\n        placement='bottomRight'\n      >\n        <Button type='link' size='small'>Remove</Button>\n      </Popconfirm>\n    );\n  }\n\n  const title = 'Act ' + act.order + ': ' + act.name;\n\n  return (\n    <Card className='act-view' size='small' title={title} extra={options} headStyle={{ background: '#d9d9d9'}} >\n      <Text>{act.description}</Text>\n      <Divider></Divider>\n      {(act.type === 'interactive')\n        ? \n          <Text strong>This act ends when:</Text>\n        : \n          <Text strong>This act contains ## steps</Text>\n      }\n    </Card>\n  );\n};\n\nexport default ActView;\n","import { useContext } from 'react';\nimport { Card, Typography, Button, Popconfirm, Collapse, message } from 'antd';\nimport { CaretUpOutlined, CaretDownOutlined } from '@ant-design/icons';\nimport ActView from './ActView';\nimport { useLiveQuery } from 'dexie-react-hooks';\nimport db from '../../db/AppDatabase';\nimport AppLogicController from '../../controllers/AppLogicController';\nimport { AppContext } from '../../stores/AppStore';\nimport '../../styles/components/entity_views/ChapterView.scss';\n\nconst { Text } = Typography;\nconst { Panel } = Collapse;\n\nconst ChapterView = ({ \n  chapter,\n  chapterIndex = null,\n  totalChapters = 0,\n  canEdit = true, \n  canRemove = true,\n  onRemove = () => {},\n  onEdit = () => {},\n  onMoveOrderUp = () => {},\n  onMoveOrderDown = () => {},\n  //\n  onAddAct = () => {},\n  onEditAct = () => {},\n  onRemoveAct = () => {},\n}) => {\n  const [,dispatch] = useContext(AppContext);\n\n  const acts = useLiveQuery(() => db.acts.where('chapter_id').equals(chapter.id).toArray() );\n\n  const options = [];\n  options.push(\n    <Button \n      type=\"default\"\n      key='move-up' \n      icon={<CaretUpOutlined />} \n      size='small' style={{marginRight: '4px'}} \n      disabled={chapterIndex === 0}\n      onClick={onMoveOrderUp} />\n  );\n  options.push(\n    <Button \n      type=\"default\" \n      key='move-down' \n      icon={<CaretDownOutlined />} \n      size='small' \n      style={{marginRight: '24px'}} \n      disabled={chapterIndex === (totalChapters-1)}\n      onClick={onMoveOrderDown} />\n  );\n  if(canEdit) {\n    options.push(<Button key='edit-chapter' type='link' size='small' onClick={onEdit}>Edit</Button>);\n  }\n  if(canRemove) {\n    options.push(\n      <Popconfirm\n        key='remove-chapter'\n        title={() => { return (<p>Are you sure you want to remove this chapter?<br/>All acts, sequence actions and end conditions associated will be removed.</p>); }}\n        onConfirm={onRemove}\n        onCancel={() => {}}\n        okText='Yes'\n        cancelText='No'\n        placement='bottomRight'\n      >\n        <Button type='link' size='small'>Remove</Button>\n      </Popconfirm>\n    );\n  }\n\n  const moveActUp = (act) => {\n    const orderInfo = {oldOrder: act.order, order: act.order - 1, chapter_id: chapter.id};\n    AppLogicController.updateActOrder(dispatch, act.id, orderInfo).then(result => {\n      //\n    }).catch(error => {\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  const moveActDown = (act) => {\n    const orderInfo = {oldOrder: act.order, order: act.order + 1, chapter_id: chapter.id};\n    AppLogicController.updateActOrder(dispatch, act.id, orderInfo).then(result => {\n      //\n    }).catch(error => {\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  const title = 'Chapter ' + chapter.order + ': ' + chapter.name;\n  const totalActs = (acts !== undefined) ? acts.length : 0;\n  const actsCollapseHeader = (totalActs === 0) ? 'No acts' : ((totalActs === 1) ? '1 act' : totalActs + ' acts');\n\n  return (\n    <Card className='chapter-view' size='small' title={title} extra={options} headStyle={{ background: '#f5f5f5'}} >\n      <Text>{chapter.description}</Text>\n      <Collapse defaultActiveKey={['1']} ghost>\n        <Panel header={actsCollapseHeader} key=\"1\">\n          { acts !== undefined && acts.sort((a, b) => { return a.order - b.order; }).map((act, index) =>\n            <ActView \n              key={act.id} \n              act={act}\n              actIndex={index} \n              totalActs={totalActs}\n              onRemove={() => { onRemoveAct(act) }} \n              onEdit={() => { onEditAct(act) }} \n              onMoveOrderUp={() => { moveActUp(act) }} \n              onMoveOrderDown={() => { moveActDown(act) }} \n            />\n            )\n          }\n          <Button type='default' size='small' onClick={() => { onAddAct(totalActs)}}>\n            Add Act\n          </Button>\n        </Panel>\n      </Collapse>\n    </Card>\n  );\n};\n/*\n              onMoveOrderUp={() => { moveCharpterUp(chapter) }} \n              onMoveOrderDown={() => { moveCharpterDown(chapter) }} */\n\nexport default ChapterView;\n","import { useState, useEffect, useContext } from 'react';\nimport { Drawer, Form, Button, Col, Row, Input, message } from 'antd';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\n\nconst { TextArea } = Input;\n\nconst AddEditChapter = ({ chapter = null, totalChapters = 0, isDrawerVisible, onDrawerClose }) => {\n  const [,dispatch] = useContext(AppContext);\n  const [form] = Form.useForm();\n  const [visible, setVisible] = useState(false);\n  const [chapterIndex, setChapterIndex] = useState(0);\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n\n  useEffect(() => {\n    if(isDrawerVisible) { //opening drawer\n      form.resetFields();\n      if (chapter) {\n        form.setFieldsValue({name: chapter.name, description: chapter.description, chapterIndex: chapter.order});\n        setChapterIndex(chapter.order);\n      } else {\n        const index = totalChapters + 1;\n        form.setFieldsValue({chapterIndex: index});\n        setChapterIndex(index);\n      }\n      openDrawer();\n    }\n  }, [isDrawerVisible, form, chapter, totalChapters]);\n\n  const openDrawer = () => {\n    setVisible(true);\n  };\n\n  const closeDrawer = () => {\n    setVisible(false);\n    onDrawerClose && onDrawerClose();\n  };\n\n  const onFinish = (values) => {\n    const name = values.name.trim();\n    const description = values.description.trim();\n    if(name === '' || description === ''){\n      closeDrawer();\n      message.error('Do not leave empty fields, sorry :(');\n      return;\n    }\n    const data = {name, description, order: chapterIndex};\n    if (chapter === null) { //new chapter\n      AppLogicController.createNewChapter(dispatch, data).then(result => {\n        closeDrawer();\n        message.success('New chapter created!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    } else { //editing chapter\n      AppLogicController.updateChapter(dispatch, chapter.id, data).then(result => {\n        closeDrawer();\n        message.success('Chapter edited!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    }\n  };\n\n  return (\n    <Drawer\n      title={(chapter === null) ? 'New chapter' : 'Edit chapter'}\n      width={360}\n      onClose={closeDrawer}\n      visible={visible}\n      bodyStyle={{ paddingBottom: 20 }}\n      footer={\n        <div style={{textAlign: 'right'}} >\n          <Button onClick={closeDrawer} style={{ marginRight: 8 }}>\n            Cancel\n          </Button>\n          <Button type=\"primary\" htmlType=\"submit\" form='add-edit-chapter-id'>\n            {(chapter === null) ? 'Create' : 'Update'}\n          </Button>\n        </div>\n      }\n    >\n      <Form layout='vertical' name='add-edit-chapter' id='add-edit-chapter-id' form={form} onFinish={onFinish} requiredMark={false}>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"chapterIndex\"\n              label=\"Chapter\"\n            >\n              <Input placeholder=\"#\" value={chapterIndex} disabled />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"name\"\n              label=\"Name\"\n              rules={[{ required: true, message: 'Please enter a name' }]}\n            >\n              <Input placeholder=\"Please enter a name\" value={name} onChange={(e) => { setName(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"description\"\n              label=\"Description\"\n              rules={[{ required: true, message: 'Please enter a description' }]}\n            >\n              <TextArea rows={10} placeholder=\"Please enter a description\" value={description} onChange={(e) => { setDescription(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n      </Form>\n    </Drawer>\n  );\n};\n\nexport default AddEditChapter;\n","import { useState, useEffect, useContext } from 'react';\nimport { Drawer, Form, Button, Col, Row, Input, Radio, Typography, message } from 'antd';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\n\nconst { TextArea } = Input;\nconst { Text } = Typography;\n\nconst AddEditAct = ({ act = null, chapter = null, totalActs = 0, isDrawerVisible, onDrawerClose }) => {\n  const [,dispatch] = useContext(AppContext);\n  const [form] = Form.useForm();\n  const [visible, setVisible] = useState(false);\n  const [actIndex, setActIndex] = useState(0);\n  const [actType, setActType] = useState('interactive');\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n\n  useEffect(() => {\n    if(isDrawerVisible) { //opening drawer\n      form.resetFields();\n      if (act) {\n        form.setFieldsValue({name: act.name, description: act.description, actIndex: act.order, actType: act.type});\n        setActIndex(act.order);\n      } else {\n        const index = totalActs + 1;\n        form.setFieldsValue({actIndex: index});\n        setActIndex(index);\n      }\n      setActType('interactive');\n      openDrawer();\n    }\n  }, [isDrawerVisible, form, act, totalActs]);\n\n  const openDrawer = () => {\n    setVisible(true);\n  };\n\n  const closeDrawer = () => {\n    setVisible(false);\n    onDrawerClose && onDrawerClose();\n  };\n\n  const onFinish = (values) => {\n    const name = values.name.trim();\n    const description = values.description.trim();\n    if(name === '' || description === ''){\n      closeDrawer();\n      message.error('Do not leave empty fields, sorry :(');\n      return;\n    }\n    const data = {name, description, order: actIndex, chapter_id: chapter.id, type: actType};\n    if (act === null) { //new act\n      AppLogicController.createNewAct(dispatch, data).then(result => {\n        closeDrawer();\n        message.success('New act created!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    } else { //editing act\n      AppLogicController.updateAct(dispatch, act.id, data).then(result => {\n        closeDrawer();\n        message.success('Act edited!');\n      }).catch(error => {\n        closeDrawer();\n        message.error('Something went wrong, sorry :(');\n      });\n    }\n  };\n\n  return (\n    <Drawer\n      title={(act === null) ? 'New act' : 'Edit act'}\n      width={360}\n      onClose={closeDrawer}\n      visible={visible}\n      bodyStyle={{ paddingBottom: 20 }}\n      footer={\n        <div style={{textAlign: 'right'}} >\n          <Button onClick={closeDrawer} style={{ marginRight: 8 }}>\n            Cancel\n          </Button>\n          <Button type=\"primary\" htmlType=\"submit\" form='add-edit-act-id'>\n            {(act === null) ? 'Create' : 'Update'}\n          </Button>\n        </div>\n      }\n    >\n      <Form layout='vertical' name='add-edit-act' id='add-edit-act-id' form={form} onFinish={onFinish} requiredMark={false}>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"actIndex\"\n              label=\"Act\"\n            >\n              <Input placeholder=\"#\" value={actIndex} disabled />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"name\"\n              label=\"Name\"\n              rules={[{ required: true, message: 'Please enter a name' }]}\n            >\n              <Input placeholder=\"Please enter a name\" value={name} onChange={(e) => { setName(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16}>\n          <Col span={24}>\n            <Form.Item\n              name=\"description\"\n              label=\"Description\"\n              rules={[{ required: true, message: 'Please enter a description' }]}\n            >\n              <TextArea rows={10} placeholder=\"Please enter a description\" value={description} onChange={(e) => { setDescription(e.target.value) }} />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={16} style={{display: (act === null ? 'block' : 'none')}}>\n          <Col span={24}>\n            <Form.Item\n              name=\"actType\"\n              label=\"Act type\"\n              initialValue='interactive'\n            >\n              <Radio.Group value={actType} onChange={(e) => { setActType(e.target.value) }} buttonStyle='solid'>\n                <Radio.Button value='interactive'>Interactive</Radio.Button>\n                <Radio.Button value='sequence'>Sequence</Radio.Button>\n              </Radio.Group>\n              <Text type='secondary' style={{display: 'block'}}>\n                { (actType === 'interactive') \n                  ? 'Interactive act allows player to choose different actions while act\\'s finished condition has not been accomplished' \n                  : 'Sequence act is used for predefined dialogs or fixed sequences (i.e. cinematics)' \n                }\n              </Text>\n            </Form.Item>\n          </Col>\n        </Row>\n      </Form>\n    </Drawer>\n  );\n};\n\nexport default AddEditAct;\n","import { useState, useContext } from 'react';\nimport { AppContext } from '../../stores/AppStore';\nimport AppLogicController from '../../controllers/AppLogicController';\nimport { Button, message } from 'antd';\nimport { useLiveQuery } from 'dexie-react-hooks';\nimport db from '../../db/AppDatabase';\nimport ChapterView from '../entity_views/ChapterView';\nimport AddEditChapter from '../drawers/AddEditChapter';\nimport AddEditAct from '../drawers/AddEditAct';\n\nconst StorylineSection = ({ onAddCondition }) => {\n  const [,dispatch] = useContext(AppContext);\n  const [addEditChapterVisible, setAddEditChapterVisible] = useState(false);\n  const [addEditActVisible, setAddEditActVisible] = useState(false);\n  const [currentChapter, setCurrentChapter] = useState(null);\n  const [currentAct, setCurrentAct] = useState(null);\n  const [currentChapterTotalActs, setCurrentChapterTotalActs] = useState(0);\n\n  const chapters = useLiveQuery(() => db.chapters.orderBy('order').toArray());\n\n  const addChapter = () => {\n    setCurrentChapter(null);\n    setAddEditChapterVisible(true);\n  };\n\n  const editCharpter = (chapter) => {\n    setCurrentChapter(chapter);\n    setAddEditChapterVisible(true);\n  };\n\n  const moveCharpterUp = (chapter) => {\n    const orderInfo = {oldOrder: chapter.order, order: chapter.order - 1};\n    AppLogicController.updateChapterOrder(dispatch, chapter.id, orderInfo).then(result => {\n      //\n    }).catch(error => {\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  const moveCharpterDown = (chapter) => {\n    const orderInfo = {oldOrder: chapter.order, order: chapter.order + 1};\n    AppLogicController.updateChapterOrder(dispatch, chapter.id, orderInfo).then(result => {\n      //\n    }).catch(error => {\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  const removeChapter = (chapter) => {\n    AppLogicController.deleteChapter(dispatch, chapter.id).then(result => {\n      message.success('Chapter removed!');\n    }).catch(error => {\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  //act handlers\n  const addAct = (chapter, totalActs) => {\n    setCurrentAct(null);\n    setCurrentChapter(chapter);\n    setCurrentChapterTotalActs(totalActs);\n    setAddEditActVisible(true);\n  };\n\n  const editAct = (act, chapter) => {\n    setCurrentChapter(chapter);\n    setCurrentAct(act);\n    setAddEditActVisible(true);\n  };\n\n  const removeAct = (act, chapter) => {\n    AppLogicController.deleteAct(dispatch, act.id, chapter.id).then(result => {\n      message.success('Act removed!');\n    }).catch(error => {\n      message.error('Something went wrong, sorry :(');\n    });\n  };\n\n  const totalChapters = (chapters !== undefined) ? chapters.length : 0;\n\n  return (\n    <div>\n      { chapters !== undefined && chapters.map((chapter, index) =>\n        <ChapterView \n          key={chapter.id} \n          chapter={chapter}\n          chapterIndex={index} \n          totalChapters={totalChapters}\n          onRemove={() => { removeChapter(chapter) }} \n          onEdit={() => { editCharpter(chapter) }} \n          onMoveOrderUp={() => { moveCharpterUp(chapter) }} \n          onMoveOrderDown={() => { moveCharpterDown(chapter) }} \n          onAddAct={(totalActs) => { addAct(chapter, totalActs) }} \n          onEditAct={(act) => { editAct(act, chapter) }}\n          onRemoveAct={(act) => { removeAct(act, chapter) }}\n        />\n        )\n      }\n      <Button type='primary' onClick={addChapter}>\n        Add Chapter\n      </Button>\n      <Button type='primary' onClick={onAddCondition} style={{marginLeft: 20}}>\n        dev:ConditionEditor\n      </Button>\n      <AddEditChapter\n        chapter={currentChapter}\n        totalChapters={totalChapters}\n        isDrawerVisible={addEditChapterVisible} \n        onDrawerClose={() => { setAddEditChapterVisible(false); }} \n      />\n      <AddEditAct\n        act={currentAct}\n        chapter={currentChapter}\n        totalActs={currentChapterTotalActs}\n        isDrawerVisible={addEditActVisible} \n        onDrawerClose={() => { setAddEditActVisible(false); }} \n      />\n    </div>\n  );\n};\n\nexport default StorylineSection;\n","\nclass EditorUtils {\n  static getComparatorsForPropType(propType) {\n    if(!propType.endsWith('arr')) { //not array\n      switch(propType) {\n        case 'int':\n          return [\n            {id: 'EQUALS', name: 'Equals'},\n            {id: 'NOT_EQUALS', name: 'Not equals'},\n            {id: 'LOWER', name: 'Lower than'},\n            {id: 'GREATER', name: 'Greater than'}\n          ];\n        case 'boolean':\n          return [\n            {id: 'EQUALS', name: 'Equals'},\n            {id: 'NOT_EQUALS', name: 'Not equals'}\n          ];\n        case 'string':\n        case 'location':\n        case 'area':\n        case 'character':\n        default: //custom entity\n          return [\n            {id: 'IS_EMPTY', name: 'Is empty'},\n            {id: 'EQUALS', name: 'Equals'},\n            {id: 'NOT_EQUALS', name: 'Not equals'}\n          ];\n      }\n    } else { //array\n      return [\n        {id: 'IS_EMPTY', name: 'Is empty'},\n        {id: 'CONTAINS', name: 'Contains'},\n        {id: 'NOT_CONTAINS', name: 'Not contains'},\n        {id: 'SIZE_EQUALS', name: 'Size equals'},\n        {id: 'SIZE_LOWER', name: 'Size lower than'},\n        {id: 'SIZE_GREATER', name: 'Size greater than'}\n      ];\n    }\n  }\n\n  static getInputTypeForExpression(propType, comparatorId) {\n    if(!propType.endsWith('arr')) { //not array\n      switch(propType) {\n        case 'int':\n          return 'TEXT_INT';\n        case 'boolean':\n          return 'BOOLEAN';\n        case 'string':\n          if(comparatorId !== 'IS_EMPTY') {\n            return 'TEXT_STRING';\n          } else {\n            return 'NONE';\n          }\n        case 'location':\n        case 'area':\n        case 'character':\n        default: //custom entity\n          if(comparatorId !== 'IS_EMPTY') {\n            return 'SELECTOR';\n          } else {\n            return 'NONE';\n          }\n      }\n    } else { //array\n      switch(comparatorId) {\n        case 'CONTAINS':\n        case 'NOT_CONTAINS':\n          switch(propType) {\n            case 'intarr':\n              return 'TEXT_INT';\n            case 'booleanarr':\n              return 'BOOLEAN';\n            case 'stringarr':\n              return 'TEXT_STRING';\n            case 'locationarr':\n            case 'areaarr':\n            case 'characterarr':\n            default: //custom entity array\n              return 'SELECTOR';\n          }\n        case 'SIZE_EQUALS': \n        case 'SIZE_LOWER': \n        case 'SIZE_GREATER':\n          return 'TEXT_INT';\n        case 'IS_EMPTY':\n        default:\n          return 'NONE';\n      }\n    }\n  }\n\n  static getEmptyExpression(name = null) {\n    let emptyExpression = {\n      gsProp: null,\n      gsPropType: null,\n      comp: null,\n      compId: null,\n      valueInputType: null,\n      value: null\n    };\n    if(name) {\n      emptyExpression.name = name;\n    }\n    return emptyExpression;\n  }\n\n}\n\nexport default EditorUtils;","import db from '../db/AppDatabase';\n\n//Controls data fetch operation (read DB only)\nclass AppDataFetchController {\n\n  static async fetchGameStateProps() {\n    return db.game_state_props.toArray();\n  }\n\n  //fetch all entities per type (location,area,character,custom)\n  static async fetchStoryEntities(type) {\n    if(type === 'location' || type === 'area' || type === 'character') {\n      const tableName = type + 's';\n      if(type === 'location' || type === 'character') {\n        return db[tableName].toArray();\n      } else { //list areas with its location name\n        return db.transaction('r', tableName, 'locations', async () => {\n          const locations = await db.locations.toArray();\n          const areas = await db[tableName].toArray();\n          return areas.map(area => {\n            area.name = area.name + ' (' + locations.find(location => location.id === area.location_id).name + ')';\n            return area;\n          });\n        });\n      }\n    } else { //custom entity\n      return db.transaction('r', 'custom_entity_defs', 'custom_entities', async () => {\n        const entityDef = await db.custom_entity_defs.where({singular_name: type}).first();\n        return db.custom_entities.where({custom_entity_def_id: entityDef.id}).toArray();\n      });\n    }\n  }\n\n}\n\nexport default AppDataFetchController;","import { useState, useEffect } from 'react';\nimport { Select } from 'antd';\nimport AppDataFetchController from '../../controllers/AppDataFetchController';\n\nconst { Option } = Select;\n\nconst EntitySelectorView = ({\n  entityType = 'location',\n  value,\n  onChangeCallback,\n}) => {\n  const [entities, setEntities] = useState([]);\n\n  useEffect(() => {\n    //Mount\n    AppDataFetchController.fetchStoryEntities(entityType).then((fetchedEntities) => {\n      setEntities(fetchedEntities);\n    }).catch(error => {\n      console.log('||--FAIL', error);\n    });\n  }, []); // eslint-disable-line\n\n  useEffect(() => {\n    AppDataFetchController.fetchStoryEntities(entityType).then((fetchedEntities) => {\n      setEntities(fetchedEntities);\n    }).catch(error => {\n      console.log('||--FAIL', error);\n    });\n  }, [entityType]);\n\n\n  return (\n    <Select value={value} onChange={(value) => { onChangeCallback(value) }} style={{width: '100%'}}>\n      { entities && entities.length > 0 && entities.map(entity => {\n          return (<Option key={entity.id} value={entity.id}>{entity.name}</Option>);\n        })\n      }\n    </Select>\n  );\n};\n\nexport default EntitySelectorView;\n","import { Select, Switch, Input, InputNumber } from 'antd';\nimport EditorUtils from './EditorUtils';\nimport EntitySelectorView from '../components/entity_views/EntitySelectorView';\nconst { Option } = Select;\n\nclass ConditionEditorUtils {\n  static renderGameStatePropsSelector(selectValue, onChangeCallback, gameStates) {\n    return (\n      <Select value={selectValue} onChange={(value) => { onChangeCallback(value) }} style={{width: '100%'}}>\n        { gameStates !== undefined && gameStates.map((gameState, index) => {\n            return (<Option key={index} value={index}>{gameState.name}</Option>);\n          })\n        }\n      </Select>\n    );\n  }\n\n  static renderComparatorSelector(propType, selectValue, onChangeCallback) {\n    return (\n      <Select value={selectValue} onChange={(value) => { onChangeCallback(value) }} style={{width: '100%'}}>\n        { propType && EditorUtils.getComparatorsForPropType(propType).map(comparator => {\n            return (<Option key={comparator.id} value={comparator.id}>{comparator.name}</Option>);\n          })\n        }\n      </Select>\n    );\n  }\n\n  static renderValueSelector(propType, valueInputType, fieldValue, onChangeCallback) {\n    switch(valueInputType) {\n      case 'BOOLEAN':\n        return (\n          <Switch checkedChildren=\"true\" unCheckedChildren=\"false\" checked={fieldValue} onChange={(e) => { onChangeCallback(e) }} />\n        );\n      case 'TEXT_STRING':\n        return (\n          <Input value={fieldValue} onChange={(e) => { onChangeCallback(e.target.value) }} />\n        );\n      case 'TEXT_INT':\n        return (\n          <InputNumber value={fieldValue} onChange={(e) => { onChangeCallback(e) }} style={{width: '100%'}} />\n        );\n      case 'SELECTOR':\n        const entityType = propType.endsWith('arr') ? propType.substring(0, propType.length-3) : propType;\n        return (\n          <EntitySelectorView entityType={entityType} value={fieldValue} onChangeCallback={onChangeCallback} />\n        );\n      case 'NONE':\n      default:\n        return null;\n    }\n  }\n\n}\n\nexport default ConditionEditorUtils;","import { List, Row, Col } from 'antd';\nimport ConditionEditorUtils from '../../utils/ConditionEditorUtils';\nimport EditorUtils from '../../utils/EditorUtils';\n\nconst ComplexConditionExpressionListItem = ({\n  expression,\n  gameStates,\n  onChange,\n}) => {\n\n  const handleExpressionGSPropChange = (value) => {\n    const exp = expression;\n    const prop = gameStates[value];\n    exp.gsProp = prop.name;\n    exp.gsPropType = prop.type;\n    exp.comp = null;\n    exp.compId = null;\n    exp.valueInputType = null;\n    exp.value = null;\n    onChange(exp);\n  };\n\n  const handleExpressionComparatorChange = (value) => {\n    const exp = expression;\n    exp.compId = value;\n    exp.valueInputType = EditorUtils.getInputTypeForExpression(exp.gsPropType, exp.compId);\n    onChange(exp);\n  };\n\n  const handleExpressionValueChange = (value) => {\n    const exp = expression;\n    exp.value = value;\n    onChange(exp);\n  };\n\n\n  return (\n    <List.Item className='complex-condition-expression-list-item'>\n      <Row gutter={[24, 8]} style={{width: '100%'}}>\n        <Col span={4}>{expression.name}</Col>\n        <Col span={7}>\n          {ConditionEditorUtils.renderGameStatePropsSelector(expression.gsProp, handleExpressionGSPropChange, gameStates)}\n        </Col>\n        <Col span={6} style={{display: (expression.gsProp !== null ? 'block' : 'none')}}>\n          {ConditionEditorUtils.renderComparatorSelector(expression.gsPropType, expression.compId, handleExpressionComparatorChange)}\n        </Col>\n        <Col span={7} style={{display: (expression.compId !== null && expression.compId !== 'IS_EMPTY' ? 'block' : 'none')}}>\n          {ConditionEditorUtils.renderValueSelector(expression.gsPropType, expression.valueInputType, expression.value, handleExpressionValueChange)}\n        </Col>\n      </Row>\n    </List.Item>\n  );\n};\n\nexport default ComplexConditionExpressionListItem;\n","import { useState, useEffect } from 'react';\nimport { Drawer, Form, Button, Col, Row, Space, List, Typography, Tabs, Tag } from 'antd';\nimport { CaretLeftOutlined } from '@ant-design/icons';\n//import { AppContext } from '../../stores/AppStore';\nimport ComplexConditionExpressionListItem from '../entity_views/ComplexConditionExpressionListItem';\nimport EditorUtils from '../../utils/EditorUtils';\n//import AppLogicController from '../../controllers/AppLogicController';\nimport AppDataFetchController from '../../controllers/AppDataFetchController';\nimport ConditionEditorUtils from '../../utils/ConditionEditorUtils';\nimport '../../styles/components/drawers/ConditionEditor.scss';\n\nconst { TabPane } = Tabs;\nconst { Text } = Typography;\nconst conditionCaret = <CaretLeftOutlined key='caret' style={{color: '#fa541c'}} />;\n\nconst ConditionEditor = ({ condition = null, isDrawerVisible, onDrawerClose }) => {\n  //const [,dispatch] = useContext(AppContext);\n  const [form] = Form.useForm();\n  const [visible, setVisible] = useState(false);\n  const [conditionType, setConditionType] = useState('1'); //1 => single, 2 => complex\n  //single expression\n  const [singleExpression, setSingleExpression] = useState(EditorUtils.getEmptyExpression());\n\n  //complex expression\n  const [complexCondition, setComplexCondition] = useState([]);\n  const [complexConditionExpressions, setComplexConditionExpressions] = useState([]);\n\n  //GS props\n  const [gameStates, setGameStates] = useState(undefined);\n\n  useEffect(() => {\n    //Mount\n    AppDataFetchController.fetchGameStateProps().then((fetchedGameStateProps) => {\n      setGameStates(fetchedGameStateProps);\n    }).catch(error => {\n      console.log('||--FAIL', error);\n    });\n  }, []); // eslint-disable-line\n\n  useEffect(() => {\n    if(isDrawerVisible) { //opening drawer\n\n\n      //TODO: RESET VALUES\n\n\n      form.resetFields();\n      if (condition) {\n        //set type accordingly\n      } else {\n        setConditionType('1');\n      }\n      openDrawer();\n    }\n  }, [isDrawerVisible, form, condition]);  // eslint-disable-line\n\n  const openDrawer = () => {\n    setVisible(true);\n  };\n\n  const closeDrawer = () => {\n    setVisible(false);\n    onDrawerClose && onDrawerClose();\n  };\n\n  //single cond\n  const handleSingleCondGSPropChange = (value) => {\n    const exp = singleExpression;\n    const prop = gameStates[value];\n    exp.gsProp = prop.name;\n    exp.gsPropType = prop.type;\n    exp.comp = null;\n    exp.compId = null;\n    exp.valueInputType = null;\n    exp.value = null;\n    setSingleExpression({ ...exp });\n    form.setFieldsValue({singleCondComparator: ''});\n  };\n\n  const handleSingleCondComparatorChange = (value) => {\n    const exp = singleExpression;\n    exp.compId = value;\n    exp.valueInputType = EditorUtils.getInputTypeForExpression(exp.gsPropType, exp.compId);\n    setSingleExpression({ ...exp });\n  };\n\n  const handleSingleCondValueChange = (value) => {\n    const exp = singleExpression;\n    exp.value = value;\n    setSingleExpression({ ...exp });\n  };\n\n  //complex condition expressions\n  const handleComplexCondExpressionChange = (expression) => {\n    const expressions = [...complexConditionExpressions];\n    const index = expressions.findIndex(exp => exp.name === expression.name);\n    expressions[index] = expression;\n    setComplexConditionExpressions(expressions);\n  };\n\n  //complex condition buttons\n  const complexConditionButtonClicked = (type) => {\n    let newCondition = [...complexCondition];\n    switch(type) {\n      case 'ADD_EXP':\n        const name = 'EXP' + (complexConditionExpressions.length + 1);\n        const newExp = EditorUtils.getEmptyExpression(name);\n        let newComplexConditionExpressions = [...complexConditionExpressions];\n        newComplexConditionExpressions.push(newExp);\n        newCondition.push({'type': 'exp', 'name': name, 'displayName': name});\n        setComplexConditionExpressions(newComplexConditionExpressions);\n        break;\n      case 'AND':\n        newCondition.push({'type': 'logic', 'name': 'AND', 'displayName': 'AND'});\n        break;\n      case 'OR':\n        newCondition.push({'type': 'logic', 'name': 'OR', 'displayName': 'OR'});\n        break;\n      case 'NEG':\n        newCondition.push({'type': 'logic', 'name': 'NEG', 'displayName': 'NEG'});\n        break;\n      case 'OPEN_GR':\n        newCondition.push({'type': 'grouping', 'name': 'OPEN', 'displayName': '('});\n        break;\n      case 'CLOSE_GR':\n        newCondition.push({'type': 'grouping', 'name': 'CLOSE', 'displayName': ')'});\n        break;\n      case 'DELETE':\n        const removed = newCondition.pop();\n        if(removed && removed.type === 'exp') {\n          let newComplexConditionExpressions = [...complexConditionExpressions];\n          newComplexConditionExpressions.pop();\n          setComplexConditionExpressions(newComplexConditionExpressions);\n        }\n        break;\n      case 'CLEAR':\n        newCondition = [];\n        setComplexConditionExpressions([]);\n        break;\n      default:\n        break;\n    }\n    setComplexCondition(newCondition);\n  };\n\n\n  const onFinish = (values) => {\n    // const name = values.name.trim();\n    // const key = values.key.trim();\n    // const singular = values.singular.trim();\n    // if(name === '' || singular === ''){\n    //   closeDrawer();\n    //   message.error('Do not leave empty fields, sorry :(');\n    //   return;\n    // }\n    // const data = {name, key, singular};\n    // AppLogicController.createNewCustomEntityDef(dispatch, data).then(result => {\n    //   closeDrawer();\n    //   message.success('New entity created!');\n    // }).catch(error => {\n    //   closeDrawer();\n    //   message.error('Something went wrong, sorry :(');\n    // });\n  };\n\n  //renders\n  const renderComplexConditionButtons = () => {\n    return (\n      <Space>\n        <Button type='default' size='small' onClick={() => { complexConditionButtonClicked('ADD_EXP') }}>Expression</Button>\n        <Button type='default' size='small' onClick={() => { complexConditionButtonClicked('AND') }}>AND</Button>\n        <Button type='default' size='small' onClick={() => { complexConditionButtonClicked('OR') }}>OR</Button>\n        <Button type='default' size='small' onClick={() => { complexConditionButtonClicked('NEG') }}>NEG</Button>\n        <Button type='default' size='small' onClick={() => { complexConditionButtonClicked('OPEN_GR') }}>(</Button>\n        <Button type='default' size='small' onClick={() => { complexConditionButtonClicked('CLOSE_GR') }}>)</Button>\n        <Button type='default' size='small' onClick={() => { complexConditionButtonClicked('DELETE') }}>Delete</Button>\n        <Button type='default' size='small' onClick={() => { complexConditionButtonClicked('CLEAR') }}>Clear</Button>\n      </Space>\n    );\n  };\n\n  const renderComplexCondition = () => {\n    let complexConditionRender = complexCondition && complexCondition.map((element, index) => {\n      let color = element.type === 'logic' ? '#52c41a' : (element.type === 'grouping' ? '#eb2f96' : '#1890ff');\n      return (<Tag key={index} color={color}>{element.displayName || element.name}</Tag>);\n    });\n    complexConditionRender.push(conditionCaret);\n    return complexConditionRender;\n  };\n\n  const complexConditionExpressionsHeader = (\n    <Row>\n      <Col span={4}><Text strong>Expression</Text></Col>\n      <Col span={7}><Text strong>Game State Prop</Text></Col>\n      <Col span={6}><Text strong>Comparator</Text></Col>\n      <Col span={7}><Text strong>Value</Text></Col>\n    </Row>\n  );\n\n  return (\n    <Drawer\n      title={(condition === null) ? 'New condition' : 'Edit condition'}\n      className='condition-editor'\n      placement='bottom'\n      height={360}\n      onClose={closeDrawer}\n      visible={visible}\n      bodyStyle={{ paddingBottom: 20 }}\n      footer={\n        <div style={{textAlign: 'right'}} >\n          <Button onClick={closeDrawer} style={{ marginRight: 8 }}>\n            Cancel\n          </Button>\n          <Button type=\"primary\" style={{ marginRight: 8 }}>\n            Validate\n          </Button>\n          <Button type=\"primary\" htmlType=\"submit\" form='add-edit-condition-id' disabled>\n            {(condition === null) ? 'Create' : 'Update'}\n          </Button>\n        </div>\n      }\n    >\n      <Form layout='vertical' name='add-edit-condition' id='add-edit-condition-id' form={form} onFinish={onFinish} requiredMark={false}>\n        <Tabs tabPosition='left' activeKey={conditionType} onChange={(activeKey) => { setConditionType(activeKey); }}>\n          <TabPane tab=\"Single\" key=\"1\">\n            <Row gutter={[24, 16]}>\n              <Col span={8}>\n                <Form.Item\n                  name=\"singleCondGSProp\"\n                  label=\"Game State Prop\"\n                  rules={[{ required: (conditionType === '1'), message: 'Please select a prop' }]}\n                >\n                  {ConditionEditorUtils.renderGameStatePropsSelector(singleExpression.gsProp, handleSingleCondGSPropChange, gameStates)}\n                </Form.Item>\n              </Col>\n              <Col span={8} style={{display: (singleExpression.gsProp !== null ? 'block' : 'none')}}>\n                <Form.Item\n                  name=\"singleCondComparator\"\n                  label=\"Comparator\"\n                  rules={[{ required: (conditionType === '1'), message: 'Please select a comparator' }]}\n                >\n                  {ConditionEditorUtils.renderComparatorSelector(singleExpression.gsPropType, singleExpression.compId, handleSingleCondComparatorChange)}\n                </Form.Item>\n              </Col>\n              <Col span={8} style={{display: (singleExpression.compId !== null && singleExpression.compId !== 'IS_EMPTY' ? 'block' : 'none')}}>\n                <Form.Item\n                  label=\"Value\"\n                >\n                  {ConditionEditorUtils.renderValueSelector(singleExpression.gsPropType, singleExpression.valueInputType, singleExpression.value, handleSingleCondValueChange)}\n                </Form.Item>\n              </Col>\n            </Row>\n          </TabPane>\n          <TabPane tab=\"Complex\" key=\"2\">\n            <Row style={{marginBottom: 8}}>\n              <Col span={24}>{renderComplexConditionButtons()}</Col>\n            </Row>\n            <Row style={{marginBottom: 16}}>\n              <Col span={24}>\n                <div className='condition-viewer'>\n                  {renderComplexCondition()}\n                </div>\n              </Col>\n            </Row>\n            <Row>\n              <Col span={24}>\n                { (complexConditionExpressions.length > 0) &&\n                  <List\n                    style={{marginBottom: 16, maxWidth: '94%'}}\n                    header={complexConditionExpressionsHeader}\n                    dataSource={complexConditionExpressions}\n                    renderItem={item => (\n                      <ComplexConditionExpressionListItem\n                        expression={item}\n                        gameStates={gameStates}\n                        onChange={handleComplexCondExpressionChange}\n                      />\n                    )}\n                  />\n                }\n              </Col>\n            </Row>\n          </TabPane>\n        </Tabs>\n      </Form>\n    </Drawer>\n  );\n};\n\nexport default ConditionEditor;\n","import { useState } from 'react';\nimport { Layout, Tabs } from 'antd';\nimport '../../styles/components/pages/StoryPage.scss';\nimport StorylineSection from '../sections/StorylineSection';\nimport ConditionEditor from '../drawers/ConditionEditor';\n\nconst { Content } = Layout;\nconst { TabPane } = Tabs;\n\nconst StoryPage = () => {\n  const [conditionEditorVisible, setConditionEditorVisible] = useState(false);\n\n  const addCondition = () => {\n    setConditionEditorVisible(true);\n  };\n\n  // const editCondition = (condition) => {\n\n  // };\n\n  return (\n    <>\n      <Content className='story-page'>\n        <Tabs type='card' size='small'>\n          <TabPane tab='Storyline (Plot)' key='1'>\n            <StorylineSection onAddCondition={() => { addCondition() }} />\n          </TabPane>\n          <TabPane tab='Sequence Actions' key='2'>\n            <p>Sequence Actions</p>\n          </TabPane>\n        </Tabs>\n      </Content>\n      <ConditionEditor isDrawerVisible={conditionEditorVisible} onDrawerClose={() => { setConditionEditorVisible(false); }} />\n    </>\n  );\n};\n\nexport default StoryPage;\n","import { useState, useEffect, useContext } from 'react';\nimport { AppContext } from '../stores/AppStore';\nimport { Affix, Button } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport '../styles/components/PlayActions.scss';\n\nconst PlayActions = () => {\n  const [state] = useContext(AppContext);\n  const [shouldRenderPlayMessage, setShouldRenderPlayMessage] = useState(true);\n\n  useEffect(() => {\n    setShouldRenderPlayMessage(false);\n    setTimeout(() => {\n      setShouldRenderPlayMessage(true);\n    }, 5);\n  }, [state.storyVerifyingRunnable]);\n\n  const renderPlayMessage = () => {\n    let message;\n    if (state.storyVerifyingRunnable) {\n      message = <LoadingOutlined />;\n    } else {\n      if (state.storyRunnable) {\n        message = <span>You're all set!! Play your story.</span>;\n      } else {\n        message = <span>Please check \"Story validation\" tab.</span>;\n      }\n    }\n    return (\n      <p style={{marginBottom: 0, marginRight: 8}}>{message}</p>\n    );\n  };\n\n  return (\n    <Affix>\n      <div className='play-actions'>\n        {shouldRenderPlayMessage && renderPlayMessage()}\n        <Button type='primary' disabled={!state.storyRunnable}>\n          RUN PLAYTEST\n        </Button>\n      </div>\n    </Affix>\n  );\n};\n\nexport default PlayActions;\n","import { useState } from 'react';\nimport { Row, Col, Card, Typography, Switch } from 'antd';\nimport '../../styles/components/sections/PlaytestConfigurationSection.scss';\n\nconst { Title, Paragraph, Text } = Typography;\n\nconst PlaytestConfigurationSection = () => {\n  //demo configs\n  const [groupPlayerInventory, setGroupPlayerInventory] = useState(false);\n  const [showAchievements, setShowAchievements] = useState(false);\n\n  return (\n    <div className='playtest-configuration-section'>\n      <Row gutter={[24, 24]} style={{paddingBottom: 24}}>\n        <Col span={24}>\n          <Card className={`run-configuration ${groupPlayerInventory ? 'enabled-state' : ''}`}>\n            <div style={{flex: 1}}>\n              <Title level={5}>Group player inventory</Title>\n              <Paragraph><Text type='secondary'>Show inventory props in separate group</Text></Paragraph>\n            </div>\n            <Switch onChange={(e) => { setGroupPlayerInventory(e) }} />\n          </Card>\n        </Col>\n        <Col span={24}>\n          <Card className={`run-configuration ${showAchievements ? 'enabled-state' : ''}`}>\n            <div style={{flex: 1}}>\n              <Title level={5}>Show player achievements</Title>\n              <Paragraph><Text type='secondary'>Display notifications when player accomplish objectives, obtain items, etc</Text></Paragraph>\n            </div>\n            <Switch onChange={(e) => { setShowAchievements(e) }} />\n          </Card>\n        </Col>\n        <Col span={24}>\n          <Card className={`run-configuration`}>\n            <div style={{flex: 1}}>\n              <Title level={5}>Focus Game state props</Title>\n              <Paragraph><Text type='secondary'>Analyze specific properties in play mode</Text></Paragraph>\n            </div>\n            <Text>TBD</Text>\n          </Card>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default PlaytestConfigurationSection;\n","import { Row, Col, Card } from 'antd';\n\nconst StoryValidationSection = () => {\n\n  return (\n    <div className='story-validation-section' style={{width: '80%', margin: '0 auto'}}>\n      <Row gutter={[24, 24]} style={{paddingBottom: 24}}>\n        <Col span={24}>\n          <Card>\n            <p>Card content</p>\n            <p>Card content</p>\n            <p>Card content</p>\n          </Card>\n        </Col>\n        <Col span={24}>\n          <Card>\n            <p>Card content</p>\n            <p>Card content</p>\n            <p>Card content</p>\n          </Card>\n        </Col>\n        <Col span={24}>\n          <Card>\n            <p>Card content</p>\n            <p>Card content</p>\n            <p>Card content</p>\n          </Card>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default StoryValidationSection;\n","import { useState, useEffect, useContext } from 'react';\nimport { Layout, Tabs } from 'antd';\nimport { AppContext } from '../../stores/AppStore';\nimport { CloseCircleOutlined, CheckCircleOutlined, LoadingOutlined } from '@ant-design/icons';\nimport PlayActions from '../PlayActions';\nimport PlaytestConfigurationSection from '../sections/PlaytestConfigurationSection';\nimport StoryValidationSection from '../sections/StoryValidationSection';\nimport '../../styles/components/pages/PlayModePage.scss';\n\nconst { Content } = Layout;\nconst { TabPane } = Tabs;\n\nconst PlayModePage = () => {\n  const [state] = useContext(AppContext);\n  const [shouldRenderTabTitle, setShouldRenderTabTitle] = useState(true);\n\n  useEffect(() => {\n    setShouldRenderTabTitle(false);\n    setTimeout(() => {\n      setShouldRenderTabTitle(true);\n    }, 5);\n  }, [state.storyVerifyingRunnable]);\n\n\n  const renderValidationTabTitle = () => {\n    let statusIcon;\n    if (state.storyVerifyingRunnable) {\n      statusIcon = <LoadingOutlined style={{marginLeft: 8}} />;\n    } else {\n      if (state.storyRunnable) {\n        statusIcon = <CheckCircleOutlined style={{color: '#389e0d', marginLeft: 8}} />;\n      } else {\n        statusIcon = <CloseCircleOutlined style={{color: '#cf1322', marginLeft: 8}} />;\n      }\n    }\n    return (\n      <span>\n        Story validation {statusIcon}\n      </span>\n    );\n  };\n\n  return (\n    <>\n      <PlayActions />\n      <Content className='play-mode-page'>\n        <Tabs type='card' size='small'>\n          <TabPane tab=\"Playtest configuration\" key=\"1\">\n            <PlaytestConfigurationSection />\n          </TabPane>\n          <TabPane tab={shouldRenderTabTitle && renderValidationTabTitle()} key=\"2\">\n            <StoryValidationSection />\n          </TabPane>\n        </Tabs>\n      </Content>\n    </>\n  );\n};\n\nexport default PlayModePage;\n","//-- Components --//\nimport React, { useEffect, useContext } from 'react';\nimport { Layout, Typography, Spin } from 'antd';\nimport AppNav from './components/AppNav';\nimport StoryTitle from './components/StoryTitle';\nimport EmptyProjectPage from './components/pages/EmptyProjectPage';\nimport ConfigPage from './components/pages/ConfigPage';\nimport StoryPage from './components/pages/StoryPage';\nimport PlayModePage from './components/pages/PlayModePage';\n//-- Context --//\nimport { AppContext } from './stores/AppStore';\n//-- Controller --//\nimport AppLogicController from './controllers/AppLogicController';\n//-- Images --//\nimport logo from './images/logo192.png';\n\n\nconst { Text } = Typography;\n\nconst AppLayout = () => {\n  const [state, dispatch] = useContext(AppContext);\n\n  useEffect(() => {\n    //Mount\n    AppLogicController.checkDatabaseOk(dispatch);\n    AppLogicController.checkStoryLoaded(dispatch);\n\n  }, []); // eslint-disable-line\n\n  if(!state.initialCheckDone || state.globalLoading) {\n    return (\n      <div className='app loading'>\n        <img src={logo} alt='RPG Story Playtesting' />\n        <Spin size='large' />\n      </div>\n    );\n    \n  }\n\n  if(state.databaseLoadError) {\n    return (\n      <Text style={{display: 'block', textAlign: 'center', paddingTop: 50}}>\n        This application requires IndexedDB. Please use a browser that supports this feature.\n      </Text>\n    );\n  }\n\n  if(state.storyLoadError) {\n    return (\n      <Text style={{display: 'block', textAlign: 'center', paddingTop: 50}}>\n        We were unable to load your story, please reload and make sure your file/url contains a RPG-SP story.<br />\n        {state.storyErrorMessage !== null && 'Error info: ' + state.storyErrorMessage}\n      </Text>\n    );\n  }\n\n  let currentPage = null;\n  if(state.storyLoaded) {\n    switch(state.page) {\n      case 'PLAYMODE': currentPage = PlayModePage; break;\n      case 'STORY': currentPage = StoryPage; break;\n      case 'CONFIG': currentPage = ConfigPage; break;\n      default: currentPage = ConfigPage; break;\n    }\n  }\n  \n\n  return (\n    <div className=\"app\">\n      <Layout>\n        <AppNav />\n        <Layout className=\"app-layout\">\n          {state.storyLoaded\n            ?\n              <>\n                <StoryTitle />\n                {React.createElement(currentPage)}\n              </>\n            : \n              <EmptyProjectPage />\n          }\n        </Layout>\n        \n      </Layout>\n    </div>\n  );\n};\n\nexport default AppLayout;\n","import AppLayout from './AppLayout';\nimport AppStore from './stores/AppStore';\nimport './styles/AntDThemeConfig.less';\nimport './styles/App.scss';\n\nconst App = () => {\n  return (\n    <AppStore>\n      <AppLayout />\n    </AppStore>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}